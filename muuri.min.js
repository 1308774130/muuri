/*!
 * Muuri v0.3.0-dev
 * https://github.com/haltu/muuri
 * Copyright (c) 2015, Haltu Oy
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
!function(t,e){var i,n,o="Muuri";if("function"==typeof define&&define.amd)define(function(r){return i=r.defined&&r.defined("velocity")?r("velocity"):void 0,n=r.defined&&r.defined("hammer")?r("hammer"):void 0,e(t,o,i,n)});else if("object"==typeof module&&module.exports){try{i=require("velocity-animate")}catch(r){}try{n=require("hammerjs")}catch(r){}module.exports=e(t,o,i,n)}else i="function"==typeof t.jQuery?t.jQuery.Velocity:t.Velocity,n=t.Hammer,t[o]=e(t,o,i,n)}(this,function(t,e,n,o,r){"use strict";function a(e){var i,n=this,o=n._settings=D(a.defaultSettings,e);if(!U.body.contains(o.container))throw new $("Container must be an existing DOM element");n._id=++nt,tt[n._id]=n,n._element=o.container,E(o.container,o.containerClass),n._layout=null,n._emitter=new a.Emitter,n._itemShowHandler="function"==typeof o.show?o.show():T("show",o.show),n._itemHideHandler="function"==typeof o.hide?o.hide():T("hide",o.hide),n._setSortGroup(o.dragSortGroup),n._sortConnections=K.isArray(o.dragSortConnections)&&o.dragSortConnections.length?o.dragSortConnections:null,n.refresh(),n._items=K.prototype.slice.call(o.items).map(function(t){return new a.Item(n,t)}),"number"!=typeof o.layoutOnResize&&o.layoutOnResize!==!0||(i=b(function(){n.refresh().refreshItems().layoutItems()},Z.max(0,parseInt(o.layoutOnResize)||0)),n._resizeHandler=function(){i()},t.addEventListener("resize",n._resizeHandler)),o.layoutOnInit&&n.layoutItems(!0)}function s(t,e){var i,n=this,o=t._settings;n._id=++nt,et[n._id]=n,e.parentNode!==t._element&&t._element.appendChild(e),E(e,o.itemClass),i="none"===S(e,"display"),E(e,i?o.itemHiddenClass:o.itemVisibleClass),n._containerId=t._id,n._element=e,n._child=e.children[0],n._animate=new a.AnimateLayout(n,e),n._animateChild=new a.AnimateVisibility(n,n._child),n._isDefaultAnimate=n._animate instanceof _,n._isDefaultChildAnimate=n._animateChild instanceof _,n._isActive=!i,n._isPositioning=!1,n._isHidden=i,n._isHiding=!1,n._isShowing=!1,n._visibilityQueue=[],n._layoutQueue=[],n._left=0,n._top=0,R(n._element,{left:"0",top:"0",transform:"translateX(0px) translateY(0px)",display:i?"none":"block"}),n._refresh(),i?t._itemHideHandler.start(n,!0):t._itemShowHandler.start(n,!0),n._drag=o.dragEnabled?new a.Drag(n):null,n._migrate={isActive:!1,appendTo:null,containerDiffX:0,containerDiffY:0,fromContainer:null,fromIndex:0,toIndex:0}}function l(t,e){var i=this,n=t._settings.layout,o=t._padding,r=t._border;i.items=e?e.concat():t.getItems("active"),i.slots={},i.setWidth=!1,i.setHeight=!1,i.width=t._width-r.left-r.right-o.left-o.right,i.height=t._height-r.top-r.bottom-o.top-o.bottom,"function"==typeof n?n(i):f(i,y(n)?n:{})}function f(t,e){var i,n,o,r,a=[],s=!!e.fillGaps,l=!!e.horizontal,d=!!e.alignRight,_=!!e.alignBottom;if(l?(t.setWidth=!0,t.width=0):(t.setHeight=!0,t.height=0),t.items.length){for(r=0;r<t.items.length;r++)o=t.items[r],n=f.getSlot(t,a,o._outerWidth,o._outerHeight,!l,s),l?t.width=Z.max(t.width,n.left+n.width):t.height=Z.max(t.height,n.top+n.height),t.slots[o._id]=n;if(d||_)for(i=J.keys(t.slots),r=0;r<i.length;r++)n=t.slots[i[r]],d&&(n.left=t.width-(n.left+n.width)),_&&(n.top=t.height-(n.top+n.height))}}function d(){}function _(t,i){this._element=i,this._queue=e+"-"+ ++nt,this._isAnimating=!1}function h(t){if(!o)throw $("["+e+"] required dependency Hammer is not defined.");var i,n=this,r=t.getContainer(),a=r._settings,s="function"==typeof a.dragStartPredicate?a.dragStartPredicate:h.defaultStartPredicate,l=null,f=null;n._itemId=t._id,n._containerId=r._id,n._hammer=i=new o.Manager(t._element),n._isMigrating=!1,n._dragData={},n._releaseData={},n._setupDragData(),n._setupReleaseData(),n._checkSortOverlap=b(function(){n._dragData.isActive&&n._checkOverlap()},a.dragSortInterval),n._sortPredicate="function"==typeof a.dragSortPredicate?a.dragSortPredicate:h.defaultSortPredicate,n._scrollHandler=function(t){n._onDragScroll(t)},i.add(new o.Pan({event:"drag",pointers:1,threshold:0,direction:o.DIRECTION_ALL})),i.add(new o.Press({event:"draginit",pointers:1,threshold:1e3,time:0})),i.set({touchAction:"none"}),i.on("draginit dragstart dragmove",function(t){f=t,l||(l=new g(function(){l===this&&n._onDragStart(f)})),l._isResolved&&n._dragData.isActive?n._onDragMove(t):l._isRejected||l._isResolved||s.call(n._getContainer(),n._getItem(),t,l)}).on("dragend dragcancel draginitup",function(t){l.reject(),s.call(n._getContainer(),n._getItem(),t,l),l._isResolved&&n._dragData.isActive&&n._onDragEnd(t),l=null,f=null}),N(t._element),N(t._child)}function g(t,e){this._isResolved=!1,this._isRejected=!1,this._onResolved=t,this._onRejected=e}function u(t,e){var i=t.length,n=i-1;return e>n?n:e<0?Z.max(i+e,0):e}function m(t,e,i){if(!(t.length<2)){var n,o=u(t,e),r=u(t,i);o!==r&&(n=t[o],t[o]=t[r],t[r]=n)}}function p(t,e,i){if(!(t.length<2)){var n=u(t,e),o=u(t,i);n!==o&&t.splice(o,0,t.splice(n,1)[0])}}function c(t){var e,i=[],n=t.length;if(n)for(i[0]=t[0],e=1;e<n;e++)i.indexOf(t[e])<0&&(i[i.length]=t[e]);return i}function y(t){return"object"==typeof t&&"[object Object]"===J.prototype.toString.call(t)}function v(t){var e=J.prototype.toString.call(t);return"[object HTMLCollection]"===e||"[object NodeList]"===e}function w(t,e){return J.keys(e).forEach(function(i){var n=y(e[i]);y(t[i])&&n?(t[i]=w({},t[i]),t[i]=w(t[i],e[i])):t[i]=n?w({},e[i]):K.isArray(e[i])?e[i].concat():e[i]}),t}function C(t){var e={};return J.keys(t).forEach(function(i){var n=t[i];n!==r&&null!==n&&(e[i]=n)}),e}function D(t,e){var i=w({},t);return i=e?w(i,e):i,i.show&&i.show.styles&&(i.show.styles=C(i.show.styles)),i.hide&&i.hide.styles&&(i.hide.styles=C(i.hide.styles)),i}function I(t,e,i){var n="number"==typeof i?i:-1;t.splice.apply(t,[n<0?t.length-n+1:n,0].concat(e))}function b(e,i){var n,o="cancel",a="finish";return i>0?function(s){n!==r&&(n=t.clearTimeout(n),s===a&&e()),s!==o&&s!==a&&(n=t.setTimeout(function(){n=r,e()},i))}:function(t){t!==o&&e()}}function S(e,i){return t.getComputedStyle(e,null).getPropertyValue("transform"===i?rt.styleName||i:i)}function x(t,e){return parseFloat(S(t,e))||0}function A(t,e){return parseFloat((S(t,"transform")||"").replace("matrix(","").split(",")["x"===e?4:5])||0}function R(t,e){var i,n,o,r=J.keys(e);for(o=0;o<r.length;o++)i=r[o],n=e[i],t.style["transform"===i&&rt?rt.propName:i]=n}function H(t,e){var i,o=J.keys(e);for(i=0;i<o.length;i++)n.hook(t,o[i],e[o[i]])}function E(t,e){t.classList?t.classList.add(e):ot(t,"."+e)||(t.className+=" "+e)}function X(t,e){t.classList?t.classList.remove(e):ot(t,"."+e)&&(t.className=(" "+t.className+" ").replace(" "+e+" "," ").trim())}function Y(){var e=t.Element.prototype,i=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;return function(t,e){return i.call(t,e)}}function P(t){var e,i,n,o=U.documentElement,a=t.charAt(0).toUpperCase()+t.slice(1),s=["","Webkit","Moz","O","ms"];for(n=0;n<s.length;n++)if(e=s[n],i=e?e+a:t,o.style[i]!==r)return e=e.toLowerCase(),{prefix:e,propName:i,styleName:e?"-"+e+"-"+t:t};return null}function L(t,e){var i,n,o=j(t)||U,r={left:0,top:0};return o===e?r:(i=z(o,"padding"),n=z(e,"padding"),{left:n.left-i.left,top:n.top-i.top})}function k(e){var i=[],n=/(auto|scroll)/,o=e.parentNode;if(at){if("fixed"===S(e,"position"))return i;for(;o&&o!==U&&o!==U.documentElement;)n.test(S(o,"overflow")+S(o,"overflow-y")+S(o,"overflow-x"))&&(i[i.length]=o),o="fixed"===S(o,"position")?null:o.parentNode;null!==o&&(i[i.length]=t)}else{for(;o&&o!==U;)"fixed"!==S(e,"position")||O(o)?(n.test(S(o,"overflow")+S(o,"overflow-y")+S(o,"overflow-x"))&&(i[i.length]=o),e=o,o=o.parentNode):o=o.parentNode;i[i.length-1]===U.documentElement?i[i.length-1]=t:i[i.length]=t}return i}function M(){if(!rt)return!0;var t,e,i=U.createElement("div"),n=U.createElement("div");return R(i,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0",transform:"none"}),R(n,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0",transform:"none"}),i.appendChild(n),U.body.appendChild(i),t=n.getBoundingClientRect().left,i.style[rt.propName]="scaleX(1)",e=n.getBoundingClientRect().left,U.body.removeChild(i),e===t}function O(t){var e=S(t,"transform"),i=S(t,"display");return"none"!==e&&"inline"!==i&&"none"!==i}function j(e){var i,n;if(e===U)return null;if(e===t)return U;if(i=S(e,"position"),"relative"===i)return e;if("fixed"!==i&&"absolute"!==i)return null;if("fixed"===i&&at)return t;if(n=e===U.documentElement?U:e.parentElement||null,"fixed"===i){for(;n&&n!==U&&!O(n);)n=n.parentElement||U;return n===U?t:n}for(;n&&n!==U&&"static"===S(n,"position")&&!O(n);)n=n.parentElement||U;return n}function z(e,i){var n={left:0,top:0};if(e===U)return n;if(n.left=t.pageXOffset||0,n.top=t.pageYOffset||0,e.self===t.self)return n;var o=e.getBoundingClientRect();if(n.left+=o.left,n.top+=o.top,i=i||"border","margin"===i){var r=x(e,"margin-left"),a=x(e,"margin-top");n.left-=r>0?r:0,n.top-=a>0?a:0}else"border"!==i&&(n.left+=x(e,"border-left-width"),n.top+=x(e,"border-top-width"));return"content"===i&&(n.left+=x(e,"padding-left"),n.top+=x(e,"padding-top")),n}function N(t){var e=t.tagName.toLowerCase();"a"!==e&&"img"!==e||t.addEventListener("dragstart",q,!1)}function Q(t){var e=t.tagName.toLowerCase();"a"!==e&&"img"!==e||t.removeEventListener("dragstart",q,!1)}function V(t,e,i,n,o){var r,a,s=t.getItems(i),l="function"==typeof n?n:o,f=s.length,d="show"===e,_=d?ht:ut,h=d?gt:mt,g=n===!0,u=!1,m=[],p=[],c=[];for(a=0;a<s.length;a++)r=s[a],(d?r._isHidden||r._isHiding||r._isShowing&&g:!r.isHidden||r._isShowing||r._isHiding&&g)&&(m[m.length]=r);if(f=m.length){for(t._emitter.emit(_,m.concat()),a=0;a<m.length;a++)r=m[a],(d&&!r._isActive||!d&&r._isActive)&&(u=!0,d&&(r._noLayoutAnimation=!0,c[c.length]=r)),r["_"+e](g,function(e,i){e||(p[p.length]=i),--f<1&&("function"==typeof l&&l(p.concat()),t._emitter.emit(h,p.concat()))});u&&(c.length&&t.refreshItems(c),t.layoutItems())}else"function"==typeof l&&l(m)}function T(t,e){var i=parseInt(e&&e.duration)||0,n=i>0,o=e&&e.easing||"ease",r=e&&y(e.styles)?e.styles:null;return{start:function(t,e,a){var s;n&&r?e?(t._isDefaultChildAnimate?H(t._child,r):R(t._child,r),a&&a()):(s={duration:i,easing:o,done:a},t._isDefaultChildAnimate?t._animateChild.start(null,r,s):t._animateChild.start(r,s)):a&&a()},stop:function(t){t._animateChild.stop()}}}function G(t,e,i){var n,o=t.splice(0,t.length);for(n=0;n<o.length;n++)o[n](e,i)}function B(t,e){if(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top)return 0;var i=Z.min(t.left+t.width,e.left+e.width)-Z.max(t.left,e.left),n=Z.min(t.top+t.height,e.top+e.height)-Z.max(t.top,e.top),o=Z.min(t.width,e.width),r=Z.min(t.height,e.height);return i*n/(o*r)*100}function W(t,e){return"active"===e?t._isActive:"inactive"===e?!t._isActive:"visible"===e?!t._isHiding:"hidden"===e?t._isHiding:"showing"===e?t._isShowing:"hiding"===e?t._isHiding:"positioning"===e?t._isPositioning:"dragging"===e?t._drag&&t._drag._dragData.isActive:"releasing"===e?t._drag&&t._drag._releaseData.isActive:"migrating"===e&&t._migrate.isActive}function q(t){t.preventDefault&&t.preventDefault()}function F(t,e){var i,n=J.keys(t).concat(J.keys(e.prototype));for(i=0;i<n.length;i++)t[n[i]]=null}var U=t.document,J=t.Object,K=t.Array,Z=t.Math,$=t.Error,tt={},et={},it={},nt=0,ot=Y(),rt=P("transform"),at=M(),st="refresh",lt="refreshItems",ft="synchronizeItems",dt="layoutItemsStart",_t="layoutItemsEnd",ht="showItemsStart",gt="showItemsEnd",ut="hideItemsStart",mt="hideItemsEnd",pt="moveItem",ct="sendItem",yt="receiveItemStart",vt="receiveItemEnd",wt="addItems",Ct="removeItems",Dt="dragStart",It="dragMove",bt="dragScroll",St="dragEnd",xt="dragSort",At="dragSend",Rt="dragReceive",Ht="dragReceiveDrop",Et="dragReleaseStart",Xt="dragReleaseEnd",Yt="destroy";return a.Item=s,a.Drag=h,a.Layout=l,a.AnimateLayout=_,a.AnimateVisibility=_,a.Emitter=d,a.defaultSettings={container:null,items:[],show:{duration:300,easing:"ease",styles:{opacity:1,scale:1}},hide:{duration:300,easing:"ease",styles:{opacity:0,scale:.5}},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1},layoutOnResize:100,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",dragEnabled:!1,dragContainer:null,dragStartPredicate:null,dragSort:!0,dragSortInterval:50,dragSortPredicate:{threshold:50,action:"move"},dragSortGroup:null,dragSortConnections:null,dragReleaseDuration:300,dragReleaseEasing:"ease",containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing"},a.prototype.getElement=function(){return this._element},a.prototype.getRect=function(){return{width:this._width,height:this._height,left:this._offset.left,right:this._offset.left+this._width,top:this._offset.top,bottom:this._offset.top+this._height}},a.prototype.getItems=function(t,e){var i,n,o=this,r=t&&"string"!=typeof t,a=r?v(t)?K.prototype.slice.call(t):[].concat(t):null,s=r?e:t,l=[];if(s="string"==typeof s?s:null,s||a){for(a=a||o._items,n=0;n<a.length;n++)i=r?o._getItem(a[n]):a[n],!i||s&&!W(i,s)||(l[l.length]=i);return l}return l.concat(o._items)},a.prototype.on=function(t,e){return this._emitter.on(t,e),this},a.prototype.off=function(t,e){return this._emitter.off(t,e),this},a.prototype.refresh=function(){var t,e,i,n=this,o=n._element,r=o.getBoundingClientRect();for(n._width=Z.round(r.width),n._height=Z.round(r.height),n._offset=n._offset||{},n._offset.left=Z.round(r.left),n._offset.top=Z.round(r.top),n._border=n._border||{},n._padding=n._padding||{},t=["left","right","top","bottom"],i=0;i<t.length;i++)e=t[i],n._border[e]=Z.round(x(o,"border-"+e+"-width")),n._padding[e]=Z.round(x(o,"padding-"+e));return n._boxSizing=S(o,"box-sizing"),n._emitter.emit(st),n},a.prototype.refreshItems=function(t){var e,i=this,n=i.getItems(t||"active");for(e=0;e<n.length;e++)n[e]._refresh();return i._emitter.emit(lt,n),i},a.prototype.addItems=function(t,e){var i,n,o,r=this,s=[].concat(t),l=[],f=r._items,d=!1;for(o=0;o<f.length;o++)i=s.indexOf(f[o]._element),i>-1&&s.splice(i,1);if(!s.length)return l;for(o=0;o<s.length;o++)n=new a.Item(r,s[o]),l[l.length]=n,n._isActive&&(d=!0,n._noLayoutAnimation=!0);return I(f,l,e),r._emitter.emit(wt,l.concat()),d&&r.layoutItems(),l},a.prototype.removeItems=function(t,e){var i,n,o=this,r=o.getItems(t),a=[],s=!1;for(n=0;n<r.length;n++)i=r[n],i._isActive&&(s=!0),a[a.length]=i._destroy(e);return o._emitter.emit(Ct,a.concat()),s&&o.layoutItems(),a},a.prototype.synchronizeItems=function(){var t,e,i,n=this,o=n._element,r=n._items;if(r.length){for(i=0;i<r.length;i++)e=r[i]._element,e.parentNode===o&&(t=t||U.createDocumentFragment(),t.appendChild(e));t&&o.appendChild(t)}return n._emitter.emit(ft),n},a.prototype.layoutItems=function(t,e){function i(t,e){t||(y[y.length]=e),++p===c&&("function"==typeof g&&g(y.concat()),h.emit(_t,y.concat()))}var n,o,r,s,l,f,d,_=this,h=_._emitter,g="function"==typeof t?t:e,u=t===!0,m=new a.Layout(_),p=0,c=m.items.length,y=[];if(_._layout=m,h.emit(dt,m.items.concat()),(m.setWidth||m.setHeight)&&(o=_._padding,r=_._border,s="border-box"===_._boxSizing,m.setHeight&&R(_._element,{height:(s?m.height+o.top+o.bottom+r.top+r.bottom:m.height)+"px"}),m.setWidth&&R(_._element,{width:(s?m.width+o.left+o.right+r.left+r.right:m.width)+"px"}),n=_._element.getBoundingClientRect(),_._width=Z.round(n.width),_._height=Z.round(n.height)),c)for(d=0;d<m.items.length;d++)l=m.items[d],f=m.slots[l._id],l._left=f.left+_._padding.left,l._top=f.top+_._padding.top,l._drag&&l._drag._dragData.isActive?i(!1,l):l._layout(u,i);else i(!0);return _},a.prototype.showItems=function(t,e,i){return V(this,"show",t,e,i),this},a.prototype.hideItems=function(t,e,i){return V(this,"hide",t,e,i),this},a.prototype.sortItems=function(t){var e=this._items;return e.length>1&&e.sort(t),this},a.prototype.filterItems=function(t,e){var i,n,o=this,r=o._items,a=typeof t,s="string"===a,l="function"===a,f=[],d=[];if(!r.length)return o;if(l||s)for(n=0;n<r.length;n++)i=r[n],(l?t(i,i._element):ot(i._element,t))?f.push(i):d.push(i);return f.length&&o.showItems(f,e),d.length&&o.hideItems(d,e),o},a.prototype.moveItem=function(t,e,i){var n,o,r,a,s,l=this,f=l._items;return f.length<2?l:(n=l._getItem(t),o=l._getItem(e),s="swap"===i,i=s?"swap":"move",n&&o&&n!==o&&(r=f.indexOf(n),a=f.indexOf(o),(s?m:p)(f,r,a),l._emitter.emit(pt,{item:n,fromIndex:r,toIndex:a,action:i}),l.layoutItems()),l)},a.prototype.sendItem=function(t){var e,i,n,o=this,r=o._settings,s=t.target,l=s._settings,f=o._getItem(t.item),d=f._migrate,h=f._element,g=f.isActive(),u=(f.isVisible()||f.isShowing())&&!f.isHiding(),m=!!t.instant,p=t.appendTo||U.body,c=t.position,y=o._items.indexOf(f),v="number"==typeof c?c:c?s._items.indexOf(s._getItem(c)):0;return f._stopLayout(!0),f._stopMigrate(!0),o._itemShowHandler.stop(f),o._itemHideHandler.stop(f),f._drag&&f._drag.destroy(),f._animate.destroy(),f._animateChild.destroy(),G(f._visibilityQueue,!0,f),X(h,r.itemClass),X(h,r.itemVisibleClass),X(h,r.itemHiddenClass),E(h,l.itemClass),E(h,u?l.itemVisibleClass:l.itemHiddenClass),o._items.splice(y,1),I(s._items,f,v),f._containerId=s._id,f._animate=new a.AnimateLayout(f,h),f._animateChild=new a.AnimateVisibility(f,f._child),f._isDefaultAnimate=f._animate instanceof _,f._isDefaultChildAnimate=f._animateChild instanceof _,o._element!==p&&(i=A(h,"x"),n=A(h,"y"),p.appendChild(h),e=L(h,o._element),i+=e.left,n+=e.top,e=L(h,s._element),d.containerDiffX=e.left,d.containerDiffY=e.top,R(h,{transform:"translateX("+i+"px) translateY("+n+"px)"})),R(h,{display:u?"block":"hidden"}),f._child.removeAttribute("style"),u?s._itemShowHandler.start(f,!0):s._itemHideHandler.start(f,!0),f._refresh(),f._drag=l.dragEnabled?new a.Drag(f):null,d.isActive=!0,d.appendTo=p,d.fromContainer=o,d.fromIndex=y,d.toIndex=v,o._emitter.emit(ct,{item:f,fromIndex:y,toContainer:s,toIndex:v}),s._emitter.emit(yt,{item:f,fromContainer:o,fromIndex:y,toIndex:v}),g&&(o.layoutItems(m),s.layoutItems(m)),o},a.prototype.destroy=function(e){var i,n=this,o=n._element,s=n._items.concat();for(n._resizeHandler&&t.removeEventListener("resize",n._resizeHandler),i=0;i<s.length;i++)s[i]._destroy(e);n._unsetSortGroup(),X(o,n._settings.containerClass),R(o,{height:""}),n._emitter.emit(Yt).destroy(),tt[n._id]=r,F(n,a)},a.prototype._getItem=function(t){var e,i,n,o,r=this;if(t){if(t instanceof s)return t._containerId===r._id?t:null;if("number"==typeof t)return e=t>-1?t:r._items.length+t,r._items[e]||null;for(i=null,o=0;o<r._items.length;o++)if(n=r._items[o],n._element===t){i=n;break}return i}return r._items[0]||null},a.prototype._setSortGroup=function(t){var e=this;return e._sortGroup=null,t&&"string"==typeof t&&(e._sortGroup=t,it[t]||(it[t]=[]),it[t].push(e._id)),e},a.prototype._unsetSortGroup=function(){var t,e,i=this,n=i._sortGroup;if(n){for(t=it[n],e=0;e<t.length;e++)if(t[e]===i._id){t.splice(e,1);break}i._sortGroup=null}return i},a.prototype._getSortConnections=function(t){var e,i,n,o,r=this,a=t?[r]:[],s=r._sortConnections;if(s&&s.length)for(o=0;o<s.length;o++)if(e=it[s[o]],e&&e.length)for(n=0;n<e.length;n++)i=e[n],i!==r._id&&a.push(tt[i]);return a},s.prototype.getContainer=function(){return tt[this._containerId]},s.prototype.getElement=function(){return this._element},s.prototype.getWidth=function(){return this._width},s.prototype.getHeight=function(){return this._height},s.prototype.getMargin=function(){return{left:this._margin.left,right:this._margin.right,top:this._margin.top,bottom:this._margin.bottom}},s.prototype.getPosition=function(){return{left:this._left,top:this._top}},s.prototype.isActive=function(){return this._isActive},s.prototype.isVisible=function(){return!this._isHidden},s.prototype.isShowing=function(){return this._isShowing},s.prototype.isHiding=function(){return this._isHiding},s.prototype.isPositioning=function(){return this._isPositioning},s.prototype.isDragging=function(){return this._drag&&this._drag._dragData.isActive},s.prototype.isReleasing=function(){return this._drag&&this._drag._releaseData.isActive},s.prototype.isMigrating=function(){return this._migrate.isActive},s.prototype._stopLayout=function(t){var e=this;return e._isPositioning?(e._animate.stop(),X(e._element,e.getContainer()._settings.itemPositioningClass),e._isPositioning=!1,t&&G(e._layoutQueue,!0,e),e):e},s.prototype._refresh=function(){var t,e,i,n,o,r,a=this;if(a._isHidden)return a;for(t=a._element,i=["left","right","top","bottom"],o=a._margin=a._margin||{},r=0;r<4;r++)n=Z.round(x(t,"margin-"+i[r])),o[i[r]]=n>0?n:0;return e=t.getBoundingClientRect(),a._width=Z.round(e.width),a._height=Z.round(e.height),a._outerWidth=a._width+o.left+o.right,a._outerHeight=a._height+o.top+o.bottom,a},s.prototype._layout=function(t,e){var i,o,r,a,s=this,l=s.getContainer(),f=l._settings,d=s._drag?s._drag._releaseData:{},_=d.isActive&&d.isPositioningStarted===!1,h=_?f.dragReleaseDuration:f.layoutDuration,g=_?f.dragReleaseEasing:f.layoutEasing,u=t!==!0&&!s._noLayoutAnimation&&h>0,m=s._isPositioning,p=s._migrate,c=function(){s._isPositioning&&(s._isPositioning=!1,X(s._element,f.itemPositioningClass)),d.isActive&&s._drag._stopRelease(),p.isActive&&s._stopMigrate(),G(s._layoutQueue,!1,s)};if(m&&G(s._layoutQueue,!0,s),_&&(d.isPositioningStarted=!0),"function"==typeof e&&(s._layoutQueue[s._layoutQueue.length]=e),i=d.isActive?d.containerDiffX:p.isActive?p.containerDiffX:0,o=d.isActive?d.containerDiffY:p.isActive?p.containerDiffY:0,u){if(m&&s._isDefaultAnimate?(r=parseFloat(n.hook(s._element,"translateX"))-i,a=parseFloat(n.hook(s._element,"translateY"))-o):(r=A(s._element,"x")-i,a=A(s._element,"y")-o),s._left===r&&s._top===a)return s._stopLayout(),void c();m||(s._isPositioning=!0,E(s._element,f.itemPositioningClass)),s._animate.start({translateX:r+i+"px",translateY:a+o+"px"},{translateX:s._left+i,translateY:s._top+o},{duration:h,easing:g,done:c})}else s._stopLayout(),s._noLayoutAnimation=!1,d.isActive&&d.element.parentNode!==l._element&&p.isActive&&p.appendTo!==l._element||R(s._element,{transform:"translateX("+(s._left+i)+"px) translateY("+(s._top+o)+"px)"}),c();return s},s.prototype._show=function(t,e){var i=this,n=i.getContainer(),o=n._settings;return i._isHidden||i._isShowing?i._isHidden||t?(i._isHiding&&n._itemHideHandler.stop(i),i._isActive=i._isShowing=!0,i._isHidden=i._isHiding=!1,E(i._element,o.itemVisibleClass),X(i._element,o.itemHiddenClass),R(i._element,{display:"block"}),G(i._visibilityQueue,!0,i),"function"==typeof e&&(i._visibilityQueue[i._visibilityQueue.length]=e),n._itemShowHandler.start(i,t,function(){G(i._visibilityQueue,!1,i)})):"function"==typeof e&&(i._visibilityQueue[i._visibilityQueue.length]=e):"function"==typeof e&&e(!1,i),i},s.prototype._hide=function(t,e){var i=this,n=i.getContainer(),o=n._settings;return i._isHidden&&!i._isHiding?"function"==typeof e&&e(!1,i):i._isHidden&&!t?"function"==typeof e&&(i._visibilityQueue[i._visibilityQueue.length]=e):(i._isShowing&&n._itemShowHandler.stop(i),i._isHidden=i._isHiding=!0,i._isActive=i._isShowing=!1,E(i._element,o.itemHiddenClass),X(i._element,o.itemVisibleClass),G(i._visibilityQueue,!0,i),"function"==typeof e&&(i._visibilityQueue[i._visibilityQueue.length]=e),n._itemHideHandler.start(i,t,function(){R(i._element,{display:"none"}),G(i._visibilityQueue,!1,i)})),i},s.prototype._stopMigrate=function(t){var e,i,n,o,r,a,s=this,l=s._migrate;return l.isActive?(e=s.getContainer(),l.appendTo!==e._element&&(i=t?A(s._element,"x")-l.containerDiffX:s._left,n=t?A(s._element,"y")-l.containerDiffY:s._top,e._element.appendChild(s._element),R(s._element,{transform:"translateX("+i+"px) translateY("+n+"px)"})),t||(o=l.fromContainer,r=l.fromIndex,a=l.toIndex),l.isActive=!1,l.appendTo=null,l.containerDiffX=0,l.containerDiffY=0,l.fromContainer=null,l.fromIndex=0,l.toIndex=0,t||e._emitter.emit(vt,{item:s,fromContainer:o,fromIndex:r,toIndex:a}),s):s},s.prototype._destroy=function(t){var e=this,i=e.getContainer(),n=i._settings,o=e._element,a=i._items.indexOf(e);e._stopLayout(!0),i._itemShowHandler.stop(e),i._itemHideHandler.stop(e),e._stopMigrate(!0),e._drag&&e._drag.destroy(),e._animate.destroy(),e._animateChild.destroy(),o.removeAttribute("style"),e._child.removeAttribute("style"),G(e._visibilityQueue,!0,e),X(o,n.itemPositioningClass),X(o,n.itemDraggingClass),X(o,n.itemReleasingClass),X(o,n.itemClass),X(o,n.itemVisibleClass),X(o,n.itemHiddenClass),a>-1&&i._items.splice(a,1),t&&o.parentNode.removeChild(o),et[e._id]=r,F(e,s)},f.getSlot=function(t,e,i,n,o,r){var a,s,l,d,_,h=e[0]||[],g=[],u={left:null,top:null,width:i,height:n};for(d=0;d<h.length;d++)if(a=h[d],u.width<=a.width&&u.height<=a.height){u.left=a.left,u.top=a.top;break}for(null===u.left&&(u.left=o?0:t.width,u.top=o?t.height:0,r||(l=!0)),o&&u.top+u.height>t.height&&(u.left>0&&(g[g.length]={left:0,top:t.height,width:u.left,height:1/0}),u.left+u.width<t.width&&(g[g.length]={left:u.left+u.width,top:t.height,width:t.width-u.left-u.width,height:1/0}),t.height=u.top+u.height),!o&&u.left+u.width>t.width&&(u.top>0&&(g[g.length]={left:t.width,top:0,width:1/0,height:u.top}),u.top+u.height<t.height&&(g[g.length]={left:t.width,top:u.top+u.height,width:1/0,height:t.height-u.top-u.height}),t.width=u.left+u.width),d=r?0:l?h.length:d;d<h.length;d++)for(s=f.splitRect(h[d],u),_=0;_<s.length;_++)a=s[_],a.width>0&&a.height>0&&(o&&a.top<t.height||!o&&a.left<t.width)&&(g[g.length]=a);return f.purgeSlots(g).sort(o?f.sortRectsTopLeft:f.sortRectsLeftTop),e[0]=g,u},f.sortRectsTopLeft=function(t,e){return t.top<e.top?-1:t.top>e.top?1:t.left<e.left?-1:t.left>e.left?1:0},f.sortRectsLeftTop=function(t,e){return t.left<e.left?-1:t.left>e.left?1:t.top<e.top?-1:t.top>e.top?1:0},f.isRectWithinRect=function(t,e){return t.left>=e.left&&t.top>=e.top&&t.left+t.width<=e.left+e.width&&t.top+t.height<=e.top+e.height},f.purgeSlots=function(t){for(var e,i,n,o=t.length;o--;)for(i=t[o],e=t.length;e--;)if(n=t[e],o!==e&&f.isRectWithinRect(i,n)){t.splice(o,1);break}return t},f.splitRect=function(t,e){var i=[],n=!(e.left>t.left+t.width||e.left+e.width<t.left||e.top>t.top+t.height||e.top+e.height<t.top);return n?(t.left<e.left&&(i[i.length]={left:t.left,top:t.top,width:e.left-t.left,height:t.height}),t.left+t.width>e.left+e.width&&(i[i.length]={left:e.left+e.width,top:t.top,width:t.left+t.width-(e.left+e.width),height:t.height}),t.top<e.top&&(i[i.length]={left:t.left,top:t.top,width:t.width,height:e.top-t.top}),t.top+t.height>e.top+e.height&&(i[i.length]={left:t.left,top:e.top+e.height,width:t.width,height:t.top+t.height-(e.top+e.height)})):i[0]=t,i},d.prototype.on=function(t,e){var i=this._events=this._events||{},n=i[t]||[];return n[n.length]=e,i[t]=n,this},d.prototype.off=function(t,e){var n=this._events=this._events||{},o=n[t]||[],r=o.length;if(r)for(;r--;)e===o[i]&&o.splice(r,1);return this},d.prototype.emit=function(t,e,i,n){var o,r,a=this._events=this._events||{},s=a[t]||[],l=s.length;if(l)for(o=arguments.length-1,s=s.concat(),r=0;r<l;r++)0===o?s[r]():1===o?s[r](e):2===o?s[r](e,i):s[r](e,i,n);return this},d.prototype.destroy=function(){var t,e=this._events||{},i=J.keys(e);for(t=0;t<i.length;t++)e[i[t]].length=0,e[i[t]]=null;return this},_.prototype.start=function(t,e,i){var o=this,r=i||{},a="function"==typeof r.done?r.done:null,s={duration:r.duration||300,delay:r.delay||0,easing:r.easing||"ease",queue:o._queue};o._isAnimating&&o.stop(),t&&H(o._element,t),o._isAnimating=!0,a&&(s.complete=function(){a()}),n(o._element,e,s),n.Utilities.dequeue(o._element,o._queue)},_.prototype.stop=function(){this._isAnimating&&(this._isAnimating=!1,n(this._element,"stop",this._queue))},_.prototype.destroy=function(){this.stop(),F(this,_)},h.defaultStartPredicate=function(t,e,i){i.resolve()},h.defaultSortPredicate=function(t){var e,i,n,o,r,a,s,l,f,d=t._drag,_=d._getContainer(),h=_._settings.dragSortPredicate||{},g=_._getSortConnections(!0),u={width:t._width,height:t._height,left:Z.round(d._dragData.elementClientX),top:Z.round(d._dragData.elementClientY)},m=0,p=0,c=null;for(f=0;f<g.length;f++)a=g[f],s=a._padding,l=a._border,i=B(u,{width:a._width-l.left-l.right-s.left-s.right,height:a._height-l.top-l.bottom-s.top-s.bottom,left:a._offset.left+l.left+s.left,top:a._offset.top+l.top+l.left}),(null===c||i>c)&&(c=i,e=f);if(!c)return!1;if(n=g[e],o=n._items,n===_?(u.left=Z.round(d._dragData.gridX)+t._margin.left,u.top=Z.round(d._dragData.gridY)+t._margin.top):(m=n._offset.left+n._border.left+n._padding.left,p=n._offset.top+n._border.top+n._padding.top),e=c=null,o.length)for(f=0;f<o.length;f++)r=o[f],r._isActive&&r!==t&&(i=B(u,{width:r._width,height:r._height,left:Z.round(r._left)+r._margin.left+m,top:Z.round(r._top)+r._margin.top+p}),(null===c||i>c)&&(c=i,e=f));else e=0,s=n._padding,l=n._border,c=B(u,{width:n._width-l.left-l.right-s.left-s.right,height:n._height-l.top-l.bottom-s.top-s.bottom,left:n._offset.left+l.left+s.left,top:n._offset.top+l.top+l.left});return null!==c&&c>=(h.threshold||50)&&{container:n,index:e,action:h.action||"move"}},h.prototype.destroy=function(){var t=this;return t._dragData.isActive?t._stopDrag():t._releaseData.isActive&&t._stopRelease(!0),t._hammer.destroy(),Q(t._getItem()._element),Q(t._getItem()._child),F(t,h),t},h.prototype._getItem=function(){return et[this._itemId]||null},h.prototype._getContainer=function(){return tt[this._containerId]||null},h.prototype._setupDragData=function(){var t=this,e=t._dragData;return e.isActive=!1,e.startEvent=null,e.currentEvent=null,e.elementStyles=null,e.scrollParents=[],e.left=0,e.top=0,e.gridX=0,e.gridY=0,e.elementClientX=0,e.elementClientY=0,e.containerDiffX=0,e.containerDiffY=0,t},h.prototype._setupReleaseData=function(){var t=this,e=t._releaseData;return e.isActive=!1,e.isPositioningStarted=!1,e.containerDiffX=0,e.containerDiffY=0,e.element=null,e.elementStyles=null,t},h.prototype._checkOverlap=function(){var t,e,i,n,o,r,a=this,s=a._getItem(),l=a._sortPredicate(s);return l?(t=a._dragData.currentEvent,e=s.getContainer(),i=e._items.indexOf(s),n=l.container||e,o=l.index,r=l.action||"move",e===n?(("swap"===r?m:p)(e._items,i,o),e._emitter.emit(xt,t,{item:s,fromIndex:i,toIndex:o,action:r}),e.layoutItems()):(s._containerId=n._id,a._isMigrating=s._containerId!==a._containerId,e._items.splice(i,1),I(n._items,s,o),e._emitter.emit(At,t,{item:s,fromIndex:i,toContainer:n,toIndex:o}),n._emitter.emit(Rt,t,{item:s,fromContainer:e,fromIndex:i,toIndex:o}),e.layoutItems(),n.layoutItems()),a):a},h.prototype._freezeElement=function(t){var e,i,n;if(t.elementStyles)return this;for(e=["width","height","padding","margin"],t.elementStyles={},n=0;n<4;n++)i=e[n],t.elementStyles[i]=t.element.style[i]||"",t.element.style[i]=S(t.element,i);return this},h.prototype._unfreezeElement=function(t){var e,i,n;if(!t.elementStyles)return this;for(e=J.keys(t.elementStyles),n=0;n<e.length;n++)i=e[n],t.element.style[i]=t.elementStyles[i];return t.elementStyles=null,this},h.prototype._finishMigration=function(){var t,e,i,n,o=this,r=o._getItem(),s=r._element,l=o._getContainer(),f=l._settings,d=r.getContainer(),h=d._settings,g=h.dragEnabled&&h._dragContainer?h._dragContainer:d._element,u={containerDiffX:0,containerDiffY:0,element:s,elementStyles:o._releaseData.elementStyles||o._dragData.elementStyles};return o._isMigrating=!1,o._drag.isActive||(o._releaseData.isActive=!0),o.destroy(),r._animate.destroy(),r._animateChild.destroy(),X(s,f.itemClass),X(s,f.itemVisibleClass),X(s,f.itemHiddenClass),E(s,h.itemClass),E(s,h.itemVisibleClass),r._animate=new a.AnimateLayout(r,s),r._animateChild=new a.AnimateVisibility(r,r._child),r._isDefaultAnimate=r._animate instanceof _,r._isDefaultChildAnimate=r._animateChild instanceof _,i=A(s,"x"),n=A(s,"y"),g.appendChild(s),e=L(s,l._element),i+=e.left,n+=e.top,g!==d._element&&(e=L(s,d._element),u.containerDiffX=e.left,u.containerDiffY=e.top),R(s,{transform:"translateX("+i+"px) translateY("+n+"px)"}),r._child.removeAttribute("style"),d._itemShowHandler.start(r,!0),r._drag=h.dragEnabled?new a.Drag(r):null,d._emitter.emit(Ht,r),r._drag?(t=r._drag._releaseData,t.containerDiffX=u.containerDiffX,
t.containerDiffY=u.containerDiffY,t.element=u.element,r._drag._startRelease()):r._layout(),o},h.prototype._stopDrag=function(){var t,e,i=this,n=i._dragData;if(!n.isActive)return i;if(i._isMigrating)return void i._finishMigration();for(t=i._getContainer(),e=0;e<n.scrollParents.length;e++)n.scrollParents[e].removeEventListener("scroll",i._scrollHandler);return i._checkSortOverlap("cancel"),n.element.parentNode!==t._element&&(t._element.appendChild(n.element),R(n.element,{transform:"translateX("+n.gridX+"px) translateY("+n.gridY+"px)"})),X(n.element,t._settings.itemDraggingClass),i._unfreezeElement(n),i._setupDragData(),i},h.prototype._startRelease=function(){var t,e,i=this,n=i._releaseData;return n.isActive?i:(t=i._getItem(),e=i._getContainer(),n.isActive=!0,E(n.element,e._settings.itemReleasingClass),e._emitter.emit(Et,t),t._layout(!1),i)},h.prototype._stopRelease=function(t){var e,i,n,o,r=this,a=r._releaseData;return a.isActive?(e=r._getItem(),i=r._getContainer(),X(a.element,i._settings.itemReleasingClass),a.element.parentNode!==i._element&&(n=t?A(a.element,"x")-a.containerDiffX:e._left,o=t?A(a.element,"y")-a.containerDiffY:e._top,i._element.appendChild(a.element),R(a.element,{transform:"translateX("+n+"px) translateY("+o+"px)"})),r._unfreezeElement(a),r._setupReleaseData(),t||i._emitter.emit(Xt,e),r):r},h.prototype._onDragStart=function(t){var e,i,n,o,r,a,s,l=this,f=l._getItem(),d=l._getContainer(),_=d._settings,h=l._dragData,g=l._releaseData;if(f._isActive){for(f._isPositioning&&f._stopLayout(!0),f._migrate.isActive&&f._stopMigrate(!0),g.isActive&&(h.elementStyles=g.elementStyles,X(f._element,_.itemReleasingClass),l._setupReleaseData()),h.isActive=!0,h.startEvent=t,h.currentEvent=t,h.element=f._element,e=A(h.element,"x"),i=A(h.element,"y"),n=d._element,o=_.dragContainer,h.left=h.gridX=e,h.top=h.gridY=i,o&&o!==n&&(h.element.parentNode===o?(r=L(h.element,n),h.containerDiffX=r.left,h.containerDiffY=r.top,h.gridX=e-h.containerDiffX,h.gridY=i-h.containerDiffY):(l._freezeElement(h),o.appendChild(h.element),r=L(h.element,n),h.containerDiffX=r.left,h.containerDiffY=r.top,h.left=e+h.containerDiffX,h.top=i+h.containerDiffY,R(h.element,{transform:"translateX("+h.left+"px) translateY("+h.top+"px)"}))),a=h.element.getBoundingClientRect(),h.elementClientX=a.left,h.elementClientY=a.top,h.scrollParents=k(h.element),o&&o!==n&&(h.scrollParents=c(h.scrollParents.concat(k(n)))),s=0;s<h.scrollParents.length;s++)h.scrollParents[s].addEventListener("scroll",l._scrollHandler);return E(h.element,_.itemDraggingClass),d._emitter.emit(Dt,t,f),l}},h.prototype._onDragMove=function(t){var e,i,n=this,o=n._getItem(),r=n._getContainer(),a=r._settings,s=n._dragData;return o._isActive?(e=t.deltaX-s.currentEvent.deltaX,i=t.deltaY-s.currentEvent.deltaY,s.currentEvent=t,s.left+=e,s.top+=i,s.gridX+=e,s.gridY+=i,s.elementClientX+=e,s.elementClientY+=i,R(s.element,{transform:"translateX("+s.left+"px) translateY("+s.top+"px)"}),a.dragSort&&n._checkSortOverlap(),r._emitter.emit(It,t,o),n):void n._stopDrag()},h.prototype._onDragScroll=function(){var t,e=this,i=e._getItem(),n=e._getContainer(),o=n._settings,r=e._dragData,a=n._element,s=o.dragContainer,l=r.element.getBoundingClientRect(),f=r.elementClientX-l.left,d=r.elementClientY-l.top;return s&&s!==a&&(t=L(r.element,a),r.containerDiffX=t.left,r.containerDiffY=t.top),r.left+=f,r.top+=d,r.gridX=r.left-r.containerDiffX,r.gridY=r.top-r.containerDiffY,R(r.element,{transform:"translateX("+r.left+"px) translateY("+r.top+"px)"}),o.dragSort&&e._checkSortOverlap(),n._emitter.emit(bt,i),e},h.prototype._onDragEnd=function(t){var e,i=this,n=i._getItem(),o=i._getContainer(),r=o._settings,a=i._dragData,s=i._releaseData;if(!n._isActive)return void i._stopDrag();for(r.dragSort&&i._checkSortOverlap("finish"),e=0;e<a.scrollParents.length;e++)a.scrollParents[e].removeEventListener("scroll",i._scrollHandler);return X(a.element,r.itemDraggingClass),o._emitter.emit(St,t,n),s.containerDiffX=a.containerDiffX,s.containerDiffY=a.containerDiffY,s.element=a.element,s.elementStyles=a.elementStyles,i._setupDragData(),i._isMigrating?i._finishMigration():i._startRelease(),i},g.prototype.isResolved=function(){return this._isResolved},g.prototype.isRejected=function(){return this._isRejected},g.prototype.resolve=function(){var t=this;t._isRejected||t._isResolved||(t._isResolved=!0,"function"==typeof t._onResolved&&t._onResolved(),t._onResolved=t._onRejected=null)},g.prototype.reject=function(){var t=this;t._isRejected||t._isResolved||(t._isRejected=!0,"function"==typeof t._onRejected&&t._onRejected(),t._onResolved=t._onRejected=null)},a});