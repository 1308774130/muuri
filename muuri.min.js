/*!
 * Muuri v0.3.0-dev
 * https://github.com/haltu/muuri
 * Copyright (c) 2015, Haltu Oy
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
!function(t,e){var i,n,o="Muuri";if("function"==typeof define&&define.amd)define(function(r){return i=r.defined&&r.defined("velocity")?r("velocity"):void 0,n=r.defined&&r.defined("hammer")?r("hammer"):void 0,e(t,o,i,n)});else if("object"==typeof module&&module.exports){try{i=require("velocity-animate")}catch(r){}try{n=require("hammerjs")}catch(r){}module.exports=e(t,o,i,n)}else i="function"==typeof t.jQuery?t.jQuery.Velocity:t.Velocity,n=t.Hammer,t[o]=e(t,o,i,n)}(this,function(t,e,n,o,r){"use strict";function a(e,i){var n,o,r,s=this;if(!lt.body.contains(e))throw new ht("Container element must be an existing DOM element");n=s._settings=at(a.defaultOptions,i),s._element="string"==typeof e?lt.querySelectorAll(e)[0]:e,s._id=++yt,_t[s._id]=s,s._layout=null,s._emitter=new a.Emitter,s._setSortGroup(n.dragSortGroup),s._sortConnections=ft.isArray(n.dragSortConnections)&&n.dragSortConnections.length?n.dragSortConnections:null,s._itemShowHandler="function"==typeof n.show?n.show():et("show",n.show),s._itemHideHandler="function"==typeof n.hide?n.hide():et("hide",n.hide),I(e,n.containerClass),s.updateDimensions("grid"),s._items=[],o=n.items,"string"==typeof o?E(s._element.children).forEach(function(t){("*"===o||vt(t,o))&&s._items.push(new a.Item(s,t))}):(ft.isArray(o)||v(o))&&(s._items=E(o).map(function(t){return new a.Item(s,t)})),"number"!=typeof n.layoutOnResize&&n.layoutOnResize!==!0||(r=C(function(){s.updateDimensions().layout()},ut.max(0,parseInt(n.layoutOnResize)||0)),s._resizeHandler=function(){r()},t.addEventListener("resize",s._resizeHandler)),n.layoutOnInit&&s.layout(!0)}function s(t,e){var i,n=this,o=t._settings;n._id=++yt,pt[n._id]=n,e.parentNode!==t._element&&t._element.appendChild(e),I(e,o.itemClass),i="none"===b(e,"display"),I(e,i?o.itemHiddenClass:o.itemVisibleClass),n._gridId=t._id,n._element=e,n._child=e.children[0],n._animate=new a.AnimateLayout(n,e),n._animateChild=new a.AnimateVisibility(n,n._child),n._isDefaultAnimate=n._animate instanceof u,n._isDefaultChildAnimate=n._animateChild instanceof u,n._isActive=!i,n._isPositioning=!1,n._isHidden=i,n._isHiding=!1,n._isShowing=!1,n._visibilityQueue=[],n._layoutQueue=[],n._left=0,n._top=0,S(n._element,{left:"0",top:"0",transform:"translateX(0px) translateY(0px)",display:i?"none":"block"}),n._updateDimensions()._updateSortData(),i?t._itemHideHandler.start(n,!0):t._itemShowHandler.start(n,!0),n._drag=o.dragEnabled?new a.Drag(n):null,n._migrate={isActive:!1,appendTo:null,containerDiffX:0,containerDiffY:0,fromGrid:null,fromIndex:0,toIndex:0}}function l(t,e){var i=this,n=t._settings.layout,o=t._padding,r=t._border;i.items=e?e.concat():t.getItems("active"),i.slots={},i.setWidth=!1,i.setHeight=!1,i.width=t._width-r.left-r.right-o.left-o.right,i.height=t._height-r.top-r.bottom-o.top-o.bottom,"function"==typeof n?n(i):d(i,y(n)?n:{})}function d(t,e){var i,n,o,r,a=[],s=!!e.fillGaps,l=!!e.horizontal,f=!!e.alignRight,u=!!e.alignBottom;if(l?(t.setWidth=!0,t.width=0):(t.setHeight=!0,t.height=0),t.items.length){for(r=0;r<t.items.length;r++)o=t.items[r],n=d.getSlot(t,a,o._outerWidth,o._outerHeight,!l,s),l?t.width=ut.max(t.width,n.left+n.width):t.height=ut.max(t.height,n.top+n.height),t.slots[o._id]=n;if(f||u)for(i=dt.keys(t.slots),r=0;r<i.length;r++)n=t.slots[i[r]],f&&(n.left=t.width-(n.left+n.width)),u&&(n.top=t.height-(n.top+n.height))}}function f(){}function u(t,i){this._element=i,this._queue=e+"-"+ ++yt,this._isAnimating=!1}function h(t){if(!o)throw ht("["+e+"] required dependency Hammer is not defined.");var i,n=this,r=t._element,a=t.getGrid(),s=a._settings,l="function"==typeof s.dragStartPredicate?s.dragStartPredicate:h.defaultStartPredicate,d=null,f=null;n._itemId=t._id,n._gridId=a._id,n._hammer=i=new o.Manager(r),n._isMigrating=!1,n._dragData={},n._releaseData={},n._setupDragData(),n._setupReleaseData(),n._checkSortOverlap=C(function(){n._dragData.isActive&&n._checkOverlap()},s.dragSortInterval),n._sortPredicate="function"==typeof s.dragSortPredicate?s.dragSortPredicate:h.defaultSortPredicate,n._scrollHandler=function(t){n._onDragScroll(t)},i.add(new o.Pan({event:"drag",pointers:1,threshold:0,direction:o.DIRECTION_ALL})),i.add(new o.Press({event:"draginit",pointers:1,threshold:1e3,time:0})),i.set({touchAction:"none"}),i.on("draginit dragstart dragmove",function(t){f=t,d||(d=new g(function(){d===this&&n._onDragStart(f)})),d._isResolved&&n._dragData.isActive?n._onDragMove(t):d._isRejected||d._isResolved||l.call(n._getGrid(),n._getItem(),t,d)}).on("dragend dragcancel draginitup",function(t){d.reject(),l.call(n._getGrid(),n._getItem(),t,d),d._isResolved&&n._dragData.isActive&&n._onDragEnd(t),d=null,f=null}),r.addEventListener("dragstart",ot,!1)}function g(t,e){this._isResolved=!1,this._isRejected=!1,this._onResolved=t,this._onRejected=e}function _(t,e){var i=t.length,n=i-1;return e>n?n:e<0?ut.max(i+e,0):e}function p(t,e,i){if(!(t.length<2)){var n,o=_(t,e),r=_(t,i);o!==r&&(n=t[o],t[o]=t[r],t[r]=n)}}function c(t,e,i){if(!(t.length<2)){var n=_(t,e),o=_(t,i);n!==o&&t.splice(o,0,t.splice(n,1)[0])}}function m(t){var e,i=[],n=t.length;if(n)for(i[0]=t[0],e=1;e<n;e++)i.indexOf(t[e])<0&&(i[i.length]=t[e]);return i}function y(t){return"object"==typeof t&&"[object Object]"===dt.prototype.toString.call(t)}function v(t){var e=dt.prototype.toString.call(t);return"[object HTMLCollection]"===e||"[object NodeList]"===e}function w(t,e){return dt.keys(e).forEach(function(i){var n=y(e[i]);y(t[i])&&n?(t[i]=w({},t[i]),t[i]=w(t[i],e[i])):t[i]=n?w({},e[i]):ft.isArray(e[i])?e[i].concat():e[i]}),t}function D(t,e,i){var n="number"==typeof i?i:-1;t.splice.apply(t,[n<0?t.length-n+1:n,0].concat(e))}function C(e,i){var n,o="cancel",a="finish";return i>0?function(s){n!==r&&(n=t.clearTimeout(n),s===a&&e()),s!==o&&s!==a&&(n=t.setTimeout(function(){n=r,e()},i))}:function(t){t!==o&&e()}}function b(e,i){return t.getComputedStyle(e,null).getPropertyValue("transform"===i?wt.styleName||i:i)}function x(t,e){return parseFloat(b(t,e))||0}function A(t,e){return parseFloat((b(t,"transform")||"").replace("matrix(","").split(",")["x"===e?4:5])||0}function S(t,e){var i,n,o,r=dt.keys(e);for(o=0;o<r.length;o++)i=r[o],n=e[i],t.style["transform"===i&&wt?wt.propName:i]=n}function H(t,e){var i,o=dt.keys(e);for(i=0;i<o.length;i++)n.hook(t,o[i],e[o[i]])}function I(t,e){t.classList?t.classList.add(e):vt(t,"."+e)||(t.className+=" "+e)}function R(t,e){t.classList?t.classList.remove(e):vt(t,"."+e)&&(t.className=(" "+t.className+" ").replace(" "+e+" "," ").trim())}function E(t){return[].slice.call(t)}function G(){var t=gt.prototype,e=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;return function(t,i){return e.call(t,i)}}function P(t){var e,i,n,o=lt.documentElement,a=t.charAt(0).toUpperCase()+t.slice(1),s=["","Webkit","Moz","O","ms"];for(n=0;n<s.length;n++)if(e=s[n],i=e?e+a:t,o.style[i]!==r)return e=e.toLowerCase(),{prefix:e,propName:i,styleName:e?"-"+e+"-"+t:t};return null}function X(t,e){var i,n,o=O(t)||lt,r={left:0,top:0};return o===e?r:(i=M(o,"padding"),n=M(e,"padding"),{left:n.left-i.left,top:n.top-i.top})}function Y(e){var i=[],n=/(auto|scroll)/,o=e.parentNode;if(Dt){if("fixed"===b(e,"position"))return i;for(;o&&o!==lt&&o!==lt.documentElement;)n.test(b(o,"overflow")+b(o,"overflow-y")+b(o,"overflow-x"))&&(i[i.length]=o),o="fixed"===b(o,"position")?null:o.parentNode;null!==o&&(i[i.length]=t)}else{for(;o&&o!==lt;)"fixed"!==b(e,"position")||L(o)?(n.test(b(o,"overflow")+b(o,"overflow-y")+b(o,"overflow-x"))&&(i[i.length]=o),e=o,o=o.parentNode):o=o.parentNode;i[i.length-1]===lt.documentElement?i[i.length-1]=t:i[i.length]=t}return i}function k(){if(!wt)return!0;var t,e,i=lt.createElement("div"),n=lt.createElement("div");return S(i,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0",transform:"none"}),S(n,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0",transform:"none"}),i.appendChild(n),lt.body.appendChild(i),t=n.getBoundingClientRect().left,i.style[wt.propName]="scaleX(1)",e=n.getBoundingClientRect().left,lt.body.removeChild(i),e===t}function L(t){var e=b(t,"transform"),i=b(t,"display");return"none"!==e&&"inline"!==i&&"none"!==i}function O(e){var i,n;if(e===lt)return null;if(e===t)return lt;if(i=b(e,"position"),"relative"===i)return e;if("fixed"!==i&&"absolute"!==i)return null;if("fixed"===i&&Dt)return t;if(n=e===lt.documentElement?lt:e.parentElement||null,"fixed"===i){for(;n&&n!==lt&&!L(n);)n=n.parentElement||lt;return n===lt?t:n}for(;n&&n!==lt&&"static"===b(n,"position")&&!L(n);)n=n.parentElement||lt;return n}function M(e,i){var n={left:0,top:0};if(e===lt)return n;if(n.left=t.pageXOffset||0,n.top=t.pageYOffset||0,e.self===t.self)return n;var o=e.getBoundingClientRect();if(n.left+=o.left,n.top+=o.top,i=i||"border","margin"===i){var r=x(e,"margin-left"),a=x(e,"margin-top");n.left-=r>0?r:0,n.top-=a>0?a:0}else"border"!==i&&(n.left+=x(e,"border-left-width"),n.top+=x(e,"border-top-width"));return"content"===i&&(n.left+=x(e,"padding-left"),n.top+=x(e,"padding-top")),n}function N(t,e){return!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top)}function j(t,e){return t.top-e.top||t.left-e.left}function z(t,e){return t.left-e.left||t.top-e.top}function V(t,e){return t.left>=e.left&&t.top>=e.top&&t.left+t.width<=e.left+e.width&&t.top+t.height<=e.top+e.height}function F(t,e){var i;return N(t,e)?(i=[],t.left<e.left&&(i[i.length]={left:t.left,top:t.top,width:e.left-t.left,height:t.height}),t.left+t.width>e.left+e.width&&(i[i.length]={left:e.left+e.width,top:t.top,width:t.left+t.width-(e.left+e.width),height:t.height}),t.top<e.top&&(i[i.length]={left:t.left,top:t.top,width:t.width,height:e.top-t.top}),t.top+t.height>e.top+e.height&&(i[i.length]={left:t.left,top:e.top+e.height,width:t.width,height:t.top+t.height-(e.top+e.height)}),i):[{left:t.left,top:t.top,width:t.width,height:t.height}]}function Q(t,e){if(!e.length)return[t];var i,n,o,r=F(t,e[0]);for(n=1;n<e.length;n++){for(i=[],o=0;o<r.length;o++)i=i.concat(F(r[o],e[n]));r=i}return r}function q(t,e){var i,n=Q(t,e),o=n[0]||null;if(n.length<2)return o;for(i=1;i<n.length;i++)n[i].width*n[i].height>o.width*o.height&&(o=n[i]);return o}function T(t,e){var i={};return i.left=ut.max(t.left,e.left),i.top=ut.max(t.top,e.top),i.width=ut.min(t.left+t.width,e.left+e.width)-i.left,i.height=ut.min(t.top+t.height,e.top+e.height)-i.top,i}function B(t){for(var e,i,n,o=t.length;o--;)for(i=t[o],e=t.length;e--;)if(n=t[e],o!==e&&V(i,n)){t.splice(o,1);break}return t}function W(t,e){if(!N(t,e))return 0;var i=ut.min(t.left+t.width,e.left+e.width)-ut.max(t.left,e.left),n=ut.min(t.top+t.height,e.top+e.height)-ut.max(t.top,e.top),o=ut.min(t.width,e.width),r=ut.min(t.height,e.height);return i*n/(o*r)*100}function U(t){var e,i={};for(e=0;e<t.length;e++)i[t[e]._id]=e;return i}function J(t,e,i,n){var o=n[t._id],r=n[e._id];return i?r-o:o-r}function K(t,e,i,n){var o,r,a,s,l,d=0;for(l=0;l<n.length;l++)if(o=n[l][0],r=n[l][1],a=(t._sortData?t:t._updateSortData())._sortData[o],s=(e._sortData?e:e._updateSortData())._sortData[o],d="desc"===r||!r&&i?s<a?-1:s>a?1:0:a<s?-1:a>s?1:0,0!==d)return d;return d}function Z(t,e){var i,n,o=t._element,r=["left","right","top","bottom"],a={width:!e,height:!e,offset:!e,padding:!e,border:!e,"box-sizing":!e};if(e)for(e=[].concat(e),n=0;n<e.length;n++)a[e[n]]=!0;if((a.width||a.height||a.offset)&&(i=o.getBoundingClientRect()),a.width&&(t._width=ut.round(i.width)),a.height&&(t._height=ut.round(i.height)),a.offset&&(t._offset=t._offset||{},t._offset.left=ut.round(i.left),t._offset.top=ut.round(i.top)),a.padding)for(t._padding=t._padding||{},n=0;n<r.length;n++)t._padding[r[n]]=ut.round(x(o,"padding-"+r[n]));if(a.border)for(t._border=t._border||{},n=0;n<r.length;n++)t._border[r[n]]=ut.round(x(o,"border-"+r[n]+"-width"));a["box-sizing"]&&(t._boxSizing=b(o,"box-sizing"))}function $(t,e){var i,n=t.getItems(e||"active");for(i=0;i<n.length;i++)n[i]._updateDimensions()}function tt(t,e,i,n){var o,a,s=t.getItems(i),l=n||{},d=l.instant===!0,f=l.onFinish,u=l.layout?l.layout:l.layout===r,h=s.length,g="show"===e,_=g?Ht:Rt,p=g?It:Et,c=!1,m=[],y=[],v=[];for(a=0;a<s.length;a++)o=s[a],(g?o._isHidden||o._isHiding||o._isShowing&&d:!o.isHidden||o._isShowing||o._isHiding&&d)&&(m[m.length]=o);if(h=m.length){for(t._emitter.emit(_,m.concat()),a=0;a<m.length;a++)o=m[a],(g&&!o._isActive||!g&&o._isActive)&&(c=!0),g&&!o._isActive&&(o._skipNextLayoutAnimation=!0,v[v.length]=o),o["_"+e](d,function(e,i){e||(y[y.length]=i),--h<1&&("function"==typeof f&&f(y.concat()),t._emitter.emit(p,y.concat()))});c&&(v.length&&t.updateDimensions("items",v),u&&t.layout("instant"===u,"function"==typeof u?u:r))}else"function"==typeof f&&f(m);return t}function et(t,e){var i=parseInt(e&&e.duration)||0,n=i>0,o=e&&e.easing||"ease",r=e&&y(e.styles)?e.styles:null;return{start:function(t,e,a){var s;n&&r?e?(t._isDefaultChildAnimate?H(t._child,r):S(t._child,r),a&&a()):(s={duration:i,easing:o,done:a},t._isDefaultChildAnimate?t._animateChild.start(null,r,s):t._animateChild.start(r,s)):a&&a()},stop:function(t){t._animateChild.stop()}}}function it(t,e,i){var n,o=t.splice(0,t.length);for(n=0;n<o.length;n++)o[n](e,i)}function nt(t,e){return"active"===e?t._isActive:"inactive"===e?!t._isActive:"visible"===e?!t._isHiding:"hidden"===e?t._isHiding:"showing"===e?t._isShowing:"hiding"===e?t._isHiding:"positioning"===e?t._isPositioning:"dragging"===e?t._drag&&t._drag._dragData.isActive:"releasing"===e?t._drag&&t._drag._releaseData.isActive:"migrating"===e&&t._migrate.isActive}function ot(t){t.preventDefault&&t.preventDefault()}function rt(t){var e={};return dt.keys(t).forEach(function(i){var n=t[i];n!==r&&null!==n&&(e[i]=n)}),e}function at(t,e){var i=w({},t);return i=e?w(i,e):i,i.show&&i.show.styles&&(i.show.styles=rt(i.show.styles)),i.hide&&i.hide.styles&&(i.hide.styles=rt(i.hide.styles)),i}function st(t,e){var i,n=dt.keys(t).concat(dt.keys(e.prototype));for(i=0;i<n.length;i++)t[n[i]]=null}var lt=t.document,dt=t.Object,ft=t.Array,ut=t.Math,ht=t.Error,gt=t.Element,_t={},pt={},ct={},mt=function(){},yt=0,vt=G(),wt=P("transform"),Dt=k(),Ct="synchronize",bt="layoutStart",xt="layoutEnd",At="add",St="remove",Ht="showStart",It="showEnd",Rt="hideStart",Et="hideEnd",Gt="filter",Pt="sort",Xt="move",Yt="send",kt="receiveStart",Lt="receiveEnd",Ot="dragStart",Mt="dragMove",Nt="dragScroll",jt="dragSort",zt="dragSend",Vt="dragReceive",Ft="dragReceiveDrop",Qt="dragEnd",qt="dragReleaseStart",Tt="dragReleaseEnd",Bt="destroy";return a.Item=s,a.Drag=h,a.Layout=l,a.AnimateLayout=u,a.AnimateVisibility=u,a.Emitter=f,a.defaultOptions={items:"*",show:{duration:300,easing:"ease",styles:{opacity:1,scale:1}},hide:{duration:300,easing:"ease",styles:{opacity:0,scale:.5}},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1},layoutOnResize:100,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragStartPredicate:null,dragSort:!0,dragSortInterval:100,dragSortPredicate:{threshold:50,action:"move"},dragSortGroup:null,dragSortConnections:null,dragReleaseDuration:300,dragReleaseEasing:"ease",containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing"},a.prototype.on=function(t,e){return this._emitter.on(t,e),this},a.prototype.off=function(t,e){return this._emitter.off(t,e),this},a.prototype.getElement=function(){return this._element},a.prototype.getDimensions=function(){var t=this;return{width:t._width,height:t._height,padding:{left:t._padding.left,right:t._padding.right,top:t._padding.top,bottom:t._padding.bottom},border:{left:t._border.left,right:t._border.right,top:t._border.top,bottom:t._border.bottom}}},a.prototype.getItems=function(t,e){var i,n,o=this,r=t&&"string"!=typeof t,a=r?v(t)?E(t):[].concat(t):null,s=r?e:t,l=[];if(s="string"==typeof s?s:null,s||a){for(a=a||o._items,n=0;n<a.length;n++)i=r?o._getItem(a[n]):a[n],!i||s&&!nt(i,s)||(l[l.length]=i);return l}return l.concat(o._items)},a.prototype.updateDimensions=function(t,e){var i=this,n="grid"===t,o="items"===t;return!n&&t||Z(i,n&&e),!o&&t||$(i,o&&e),i},a.prototype.updateSortData=function(t){var e,i=this,n=i.getItems(t);for(e=0;e<n.length;e++)n[e]._updateSortData();return i},a.prototype.synchronize=function(){var t,e,i,n=this,o=n._element,r=n._items;if(r.length){for(i=0;i<r.length;i++)e=r[i]._element,e.parentNode===o&&(t=t||lt.createDocumentFragment(),t.appendChild(e));t&&o.appendChild(t)}return n._emitter.emit(Ct),n},a.prototype.layout=function(t,e){function i(t,e){t||(m[m.length]=e),++p===c&&("function"==typeof h&&h(m.concat()),u.emit(xt,m.concat()))}var n,o,r,s,l,d,f=this,u=f._emitter,h="function"==typeof t?t:e,g=t===!0,_=new a.Layout(f),p=0,c=_.items.length,m=[];if(f._layout=_,u.emit(bt,_.items.concat()),(_.setWidth||_.setHeight)&&(n=f._padding,o=f._border,r="border-box"===f._boxSizing,_.setHeight&&S(f._element,{height:(r?_.height+n.top+n.bottom+o.top+o.bottom:_.height)+"px"}),_.setWidth&&S(f._element,{width:(r?_.width+n.left+n.right+o.left+o.right:_.width)+"px"}),f.updateDimensions("grid",["width","height"])),c)for(d=0;d<_.items.length;d++)s=_.items[d],l=_.slots[s._id],s._left=l.left+f._padding.left,s._top=l.top+f._padding.top,s._drag&&s._drag._dragData.isActive?i(!1,s):s._layout(g,i);else i(!0);return f},a.prototype.add=function(t,e){var i,n,o,s=this,l=[].concat(t),d=e||{},f=d.layout?d.layout:d.layout===r,u=[],h=s._items,g=!1;for(o=0;o<h.length;o++)i=l.indexOf(h[o]._element),i>-1&&l.splice(i,1);if(!l.length)return u;for(o=0;o<l.length;o++)n=new a.Item(s,l[o]),u[u.length]=n,n._isActive&&(g=!0,n._skipNextLayoutAnimation=!0);return D(h,u,d.index),s._emitter.emit(At,u.concat()),g&&f&&s.layout("instant"===f,"function"==typeof f?f:r),u},a.prototype.remove=function(t,e){var i,n,o=this,a=o.getItems(t),s=e||{},l=s.layout?s.layout:s.layout===r,d=[],f=!1;for(n=0;n<a.length;n++)i=a[n],i._isActive&&(f=!0),d[d.length]=i._destroy(s.removeElements);return o._emitter.emit(St,d.concat()),f&&l&&o.layout("instant"===l,"function"==typeof l?l:r),d},a.prototype.show=function(t,e){return tt(this,"show",t,e)},a.prototype.hide=function(t,e){return tt(this,"hide",t,e)},a.prototype.filter=function(t,e){var i,n,o,a=this,s=a._items,l=typeof t,d="string"===l,f="function"===l,u=e||{},h=u.instant===!0,g=u.layout?u.layout:u.layout===r,_="function"==typeof u.onFinish?u.onFinish:null,p=[],c=[],m=-1;if(!s.length)return a;if(i=_?function(){++m&&_(p.concat(),c.concat())}:mt,f||d)for(o=0;o<s.length;o++)n=s[o],(f?t(n,n._element):vt(n._element,t))?p.push(n):c.push(n);return p.length?a.show(p,{instant:h,onFinish:i,layout:!1}):i(),c.length?a.hide(c,{instant:h,onFinish:i,layout:!1}):i(),(p.length||c.length)&&(a._emitter.emit(Gt,p.concat(),c.concat()),g&&a.layout("instant"===g,"function"==typeof g?g:r)),a},a.prototype.sort=function(t,e){var i,n,o=this,a=o._items,s=e||{},l=!!s.descending,d=s.layout?s.layout:s.layout===r;if(a.length<2)return o;if(i=a.concat(),"function"==typeof t)a.sort(function(e,o){return t(e,o)||J(e,o,l,n||(n=U(i)))});else if("string"==typeof t)t=t.trim().split(" ").map(function(t){return t.split(":")}),a.sort(function(e,o){return K(e,o,l,t)||J(e,o,l,n||(n=U(i)))});else{if(!ft.isArray(t))return o;a.splice(0,a.length).concat(t)}return o._emitter.emit(Pt,a.concat(),i),d&&o.layout("instant"===d,"function"==typeof d?d:r),o},a.prototype.move=function(t,e,i){var n,o,a,s,l,d=this,f=d._items,u=i||{},h=u.layout?u.layout:u.layout===r;return f.length<2?d:(n=d._getItem(t),o=d._getItem(e),l="swap"===action,action=l?"swap":"move",n&&o&&n!==o&&(a=f.indexOf(n),s=f.indexOf(o),(l?p:c)(f,a,s),d._emitter.emit(Xt,{item:n,fromIndex:a,toIndex:s,action:action}),h&&d.layout("instant"===h,"function"==typeof h?h:r)),d)},a.prototype.send=function(t,e,i,n){var o,s,l,d,f,h,g,_,p,c,m,y,v,w,C=this,b=e,x=C._getItem(t);return x&&b instanceof a&&C!==b?(m="number"==typeof i?i:b._items.indexOf(b._getItem(i)),null===m?C:(c=C._items.indexOf(x),o=C._settings,s=b._settings,l=n||{},d=l.appendTo||lt.body,f=l.layout?l.layout:l.layout===r,h=x._migrate,g=x._element,_=x.isActive(),p=(x.isVisible()||x.isShowing())&&!x.isHiding(),x._stopLayout(!0),x._stopMigrate(!0),C._itemShowHandler.stop(x),C._itemHideHandler.stop(x),x._drag&&x._drag.destroy(),x._animate.destroy(),x._animateChild.destroy(),it(x._visibilityQueue,!0,x),R(g,o.itemClass),R(g,o.itemVisibleClass),R(g,o.itemHiddenClass),I(g,s.itemClass),I(g,p?s.itemVisibleClass:s.itemHiddenClass),C._items.splice(c,1),D(b._items,x,m),x._gridId=b._id,x._animate=new a.AnimateLayout(x,g),x._animateChild=new a.AnimateVisibility(x,x._child),x._isDefaultAnimate=x._animate instanceof u,x._isDefaultChildAnimate=x._animateChild instanceof u,C._element!==d&&(v=A(g,"x"),w=A(g,"y"),d.appendChild(g),y=X(g,C._element),v+=y.left,w+=y.top,y=X(g,b._element),h.containerDiffX=y.left,h.containerDiffY=y.top,S(g,{transform:"translateX("+v+"px) translateY("+w+"px)"})),S(g,{display:p?"block":"hidden"}),x._child.removeAttribute("style"),p?b._itemShowHandler.start(x,!0):b._itemHideHandler.start(x,!0),x._updateDimensions()._updateSortData(),x._drag=s.dragEnabled?new a.Drag(x):null,h.isActive=!0,h.appendTo=d,h.fromGrid=C,h.fromIndex=c,h.toIndex=m,C._emitter.emit(Yt,{item:x,fromIndex:c,toGrid:b,toIndex:m}),b._emitter.emit(kt,{item:x,fromGrid:C,fromIndex:c,toIndex:m}),_&&f&&("instant"===f?(C.layout(!0),b.layout(!0)):"function"==typeof f?(C.layout(function(t){f(t,C)}),b.layout(function(t){f(t,b)})):(C.layout(),b.layout())),C)):C},a.prototype.destroy=function(e){var i,n=this,o=n._element,s=n._items.concat();for(n._resizeHandler&&t.removeEventListener("resize",n._resizeHandler),i=0;i<s.length;i++)s[i]._destroy(e);n._unsetSortGroup(),R(o,n._settings.containerClass),S(o,{height:""}),n._emitter.emit(Bt).destroy(),_t[n._id]=r,st(n,a)},a.prototype._getItem=function(t){var e,i,n,o,r=this;if(t){if(t instanceof s)return t._gridId===r._id?t:null;if("number"==typeof t)return e=t>-1?t:r._items.length+t,r._items[e]||null;for(i=null,o=0;o<r._items.length;o++)if(n=r._items[o],n._element===t){i=n;break}return i}return r._items[0]||null},a.prototype._setSortGroup=function(t){var e=this;return e._sortGroup=null,t&&"string"==typeof t&&(e._sortGroup=t,ct[t]||(ct[t]=[]),ct[t].push(e._id)),e},a.prototype._unsetSortGroup=function(){var t,e,i=this,n=i._sortGroup;if(n){for(t=ct[n],e=0;e<t.length;e++)if(t[e]===i._id){t.splice(e,1);break}i._sortGroup=null}return i},a.prototype._getSortConnections=function(t){var e,i,n,o,r=this,a=t?[r]:[],s=r._sortConnections;if(s&&s.length)for(o=0;o<s.length;o++)if(e=ct[s[o]],e&&e.length)for(n=0;n<e.length;n++)i=e[n],i!==r._id&&a.push(_t[i]);return a},s.prototype.getGrid=function(){return _t[this._gridId]},s.prototype.getElement=function(){return this._element},s.prototype.getWidth=function(){return this._width},s.prototype.getHeight=function(){return this._height},s.prototype.getMargin=function(){return{left:this._margin.left,right:this._margin.right,top:this._margin.top,bottom:this._margin.bottom}},s.prototype.getPosition=function(){return{left:this._left,top:this._top}},s.prototype.isActive=function(){return this._isActive},s.prototype.isVisible=function(){return!this._isHidden},s.prototype.isShowing=function(){return this._isShowing},s.prototype.isHiding=function(){return this._isHiding},s.prototype.isPositioning=function(){return this._isPositioning},s.prototype.isDragging=function(){return this._drag&&this._drag._dragData.isActive},s.prototype.isReleasing=function(){return this._drag&&this._drag._releaseData.isActive},s.prototype.isMigrating=function(){return this._migrate.isActive},s.prototype._stopLayout=function(t){var e=this;return e._isPositioning?(e._animate.stop(),R(e._element,e.getGrid()._settings.itemPositioningClass),e._isPositioning=!1,t&&it(e._layoutQueue,!0,e),e):e},s.prototype._updateDimensions=function(){var t,e,i,n,o,r,a=this;if(a._isHidden)return a;for(t=a._element,i=["left","right","top","bottom"],o=a._margin=a._margin||{},r=0;r<4;r++)n=ut.round(x(t,"margin-"+i[r])),o[i[r]]=n>0?n:0;return e=t.getBoundingClientRect(),a._width=ut.round(e.width),a._height=ut.round(e.height),a._outerWidth=a._width+o.left+o.right,a._outerHeight=a._height+o.top+o.bottom,a},s.prototype._updateSortData=function(){var t=this,e={},i=t.getGrid()._settings.sortData;return i&&dt.keys(i).forEach(function(n){e[n]=i[n](t,t._element)}),t._sortData=e,t},s.prototype._layout=function(t,e){var i,o,r,a,s=this,l=s._element,d=s.getGrid(),f=d._settings,u=s._drag?s._drag._releaseData:{},h=u.isActive&&u.isPositioningStarted===!1,g=h?f.dragReleaseDuration:f.layoutDuration,_=h?f.dragReleaseEasing:f.layoutEasing,p=!t&&!s._skipNextLayoutAnimation&&g>0,c=s._isPositioning,m=s._migrate,y=function(){s._isPositioning&&(s._isPositioning=!1,R(l,f.itemPositioningClass)),u.isActive&&s._drag._stopRelease(),m.isActive&&s._stopMigrate(),it(s._layoutQueue,!1,s)};if(c&&it(s._layoutQueue,!0,s),h&&(u.isPositioningStarted=!0),"function"==typeof e&&(s._layoutQueue[s._layoutQueue.length]=e),i=u.isActive?u.containerDiffX:m.isActive?m.containerDiffX:0,o=u.isActive?u.containerDiffY:m.isActive?m.containerDiffY:0,p){if(c&&s._isDefaultAnimate?(r=parseFloat(n.hook(l,"translateX"))-i,a=parseFloat(n.hook(l,"translateY"))-o):(r=A(l,"x")-i,a=A(l,"y")-o),s._left===r&&s._top===a)return s._stopLayout(),void y();c||(s._isPositioning=!0,I(l,f.itemPositioningClass)),s._animate.start({translateX:r+i+"px",translateY:a+o+"px"},{translateX:s._left+i,translateY:s._top+o},{duration:g,easing:_,onFinish:y})}else s._stopLayout(),s._skipNextLayoutAnimation=!1,u.isActive&&l.parentNode!==d._element&&m.isActive&&m.appendTo!==d._element||S(l,{transform:"translateX("+(s._left+i)+"px) translateY("+(s._top+o)+"px)"}),y();return s},s.prototype._show=function(t,e){var i=this,n=i._element,o=i._visibilityQueue,r=i.getGrid(),a=r._settings,s="function"==typeof e?e:null;return i._isShowing?t?(r._itemShowHandler.stop(),it(o,!0,i),s&&(o[o.length]=s),r._itemShowHandler.start(i,t,function(){it(o,!1,i)})):s&&(o[o.length]=s):i._isHidden?(i._isHiding&&r._itemHideHandler.stop(i),i._isActive=i._isShowing=!0,i._isHidden=i._isHiding=!1,I(n,a.itemVisibleClass),R(n,a.itemHiddenClass),S(n,{display:"block"}),it(o,!0,i),s&&(o[o.length]=s),r._itemShowHandler.start(i,t,function(){it(o,!1,i)})):s&&s(!1,i),i},s.prototype._hide=function(t,e){var i=this,n=i._element,o=i._visibilityQueue,r=i.getGrid(),a=r._settings,s="function"==typeof e?e:null;return i._isHiding?t?(r._itemHideHandler.stop(),it(o,!0,i),s&&(o[o.length]=s),r._itemHideHandler.start(i,t,function(){S(n,{display:"none"}),it(o,!1,i)})):s&&(o[o.length]=s):i._isHidden?s&&s(!1,i):(i._isShowing&&r._itemShowHandler.stop(i),i._isHidden=i._isHiding=!0,i._isActive=i._isShowing=!1,I(n,a.itemHiddenClass),R(n,a.itemVisibleClass),it(o,!0,i),"function"==typeof s&&(o[o.length]=s),r._itemHideHandler.start(i,t,function(){S(n,{display:"none"}),it(o,!1,i)})),i},s.prototype._stopMigrate=function(t){var e,i,n,o,r,a,s,l=this,d=l._migrate;return d.isActive?(e=l._element,i=l.getGrid(),d.appendTo!==i._element&&(n=t?A(e,"x")-d.containerDiffX:l._left,o=t?A(e,"y")-d.containerDiffY:l._top,i._element.appendChild(e),S(e,{transform:"translateX("+n+"px) translateY("+o+"px)"})),t||(r=d.fromGrid,a=d.fromIndex,s=d.toIndex),d.isActive=!1,d.appendTo=null,d.containerDiffX=0,d.containerDiffY=0,d.fromGrid=null,d.fromIndex=0,d.toIndex=0,t||i._emitter.emit(Lt,{item:l,fromGrid:r,fromIndex:a,toIndex:s}),l):l},s.prototype._destroy=function(t){var e=this,i=e.getGrid(),n=i._settings,o=e._element,a=i._items.indexOf(e);e._stopLayout(!0),i._itemShowHandler.stop(e),i._itemHideHandler.stop(e),e._stopMigrate(!0),e._drag&&e._drag.destroy(),e._animate.destroy(),e._animateChild.destroy(),o.removeAttribute("style"),e._child.removeAttribute("style"),it(e._visibilityQueue,!0,e),R(o,n.itemPositioningClass),R(o,n.itemDraggingClass),R(o,n.itemReleasingClass),R(o,n.itemClass),R(o,n.itemVisibleClass),R(o,n.itemHiddenClass),a>-1&&i._items.splice(a,1),t&&o.parentNode.removeChild(o),pt[e._id]=r,st(e,s)},d.getSlot=function(t,e,i,n,o,r){var a,s,l,d,f,u=e[0]||[],h=[],g={left:null,top:null,width:i,height:n};for(d=0;d<u.length;d++)if(a=u[d],g.width<=a.width&&g.height<=a.height){g.left=a.left,g.top=a.top;break}for(null===g.left&&(g.left=o?0:t.width,g.top=o?t.height:0,r||(l=!0)),o&&g.top+g.height>t.height&&(g.left>0&&(h[h.length]={left:0,top:t.height,width:g.left,height:1/0}),g.left+g.width<t.width&&(h[h.length]={left:g.left+g.width,top:t.height,width:t.width-g.left-g.width,height:1/0}),t.height=g.top+g.height),!o&&g.left+g.width>t.width&&(g.top>0&&(h[h.length]={left:t.width,top:0,width:1/0,height:g.top}),g.top+g.height<t.height&&(h[h.length]={left:t.width,top:g.top+g.height,width:1/0,height:t.height-g.top-g.height}),t.width=g.left+g.width),d=r?0:l?u.length:d;d<u.length;d++)for(s=F(u[d],g),f=0;f<s.length;f++)a=s[f],a.width>0&&a.height>0&&(o&&a.top<t.height||!o&&a.left<t.width)&&(h[h.length]=a);return e[0]=B(h).sort(o?j:z),g},f.prototype.on=function(t,e){var i=this._events=this._events||{},n=i[t]||[];return n[n.length]=e,i[t]=n,this},f.prototype.off=function(t,e){var n=this._events=this._events||{},o=n[t]||[],r=o.length;if(r)for(;r--;)e===o[i]&&o.splice(r,1);return this},f.prototype.emit=function(t,e,i,n){var o,r,a=this._events=this._events||{},s=a[t]||[],l=s.length;if(l)for(o=arguments.length-1,s=s.concat(),r=0;r<l;r++)0===o?s[r]():1===o?s[r](e):2===o?s[r](e,i):s[r](e,i,n);return this},f.prototype.destroy=function(){var t,e=this._events||{},i=dt.keys(e);for(t=0;t<i.length;t++)e[i[t]].length=0,e[i[t]]=null;return this},u.prototype.start=function(t,e,i){var o=this,r=o._element,a=i||{},s="function"==typeof a.onFinish?a.onFinish:null,l={duration:a.duration||300,delay:a.delay||0,easing:a.easing||"ease",queue:o._queue};o._isAnimating&&o.stop(),t&&H(r,t),o._isAnimating=!0,s&&(l.complete=function(){s()}),n(r,e,l),n.Utilities.dequeue(r,o._queue)},u.prototype.stop=function(){this._isAnimating&&(this._isAnimating=!1,n(this._element,"stop",this._queue))},u.prototype.destroy=function(){this.stop(),st(this,u)},h.defaultStartPredicate=function(t,e,i){i.resolve()},h.defaultSortPredicate=function(t){var e,i,n,o,r,a,s,l,d,f,u,h,g,_,p,c=t._drag,m=c._dragData,y=c._getGrid(),v=y._settings.dragSortPredicate||{},w=v.threshold||50,D=v.action||"move",C=y._getSortConnections(!0),b={width:t._width,height:t._height,left:ut.round(m.elementClientX),top:ut.round(m.elementClientY)},x=[],A=0,S=0,H=null,I=null,R=function(){return null!==H&&H>=w};for(p=0;p<C.length;p++)i=C[p],i.updateDimensions("grid","offset"),_=i._offset,n=W(b,{width:i._width,height:i._height,left:_.left,top:_.top}),(null===H||n>H)&&(e=p,H=n);if(!R())return!1;for(o=C[e],r=o._items,o===y?(g=t._margin,b.left=ut.round(m.gridX)+g.left,b.top=ut.round(m.gridY)+g.top):(_=o._offset,h=o._border,u=o._padding,A=_.left+h.left+u.left,S=_.top+h.top+u.top),e=H=null,p=0;p<r.length;p++)a=r[p],!d&&a._isActive&&(d=!0),a._isActive&&(g=a._margin,s={width:a._width,height:a._height,left:ut.round(a._left)+g.left+A,top:ut.round(a._top)+g.top+S},l=W(b,s),l>0&&x.push(s),a!==t?(null===H||l>H)&&(e=p,H=l):I=l);return d?R()||I&&!(I<w)||(f=q(b,x),f&&(h=o._border,u=o._padding,f=T(f,{width:o._width-u.left-u.right-h.left-h.right,height:o._height-u.top-u.bottom-h.top-h.bottom,left:A,top:S}),f.width*f.height>b.width*b.height*.5&&console.log(f))):(e=0,H=1/0),!!R()&&{grid:o,index:e,action:D}},h.prototype.destroy=function(){var t=this,e=t._getItem();return t._dragData.isActive?t._stopDrag():t._releaseData.isActive&&t._stopRelease(!0),t._hammer.destroy(),e._element.removeEventListener("dragstart",ot,!1),st(t,h),t},h.prototype._getItem=function(){return pt[this._itemId]||null},h.prototype._getGrid=function(){return _t[this._gridId]||null},h.prototype._setupDragData=function(){var t=this,e=t._dragData;return e.isActive=!1,e.startEvent=null,e.currentEvent=null,e.scrollParents=[],e.left=0,e.top=0,e.gridX=0,e.gridY=0,e.elementClientX=0,e.elementClientY=0,
e.containerDiffX=0,e.containerDiffY=0,t},h.prototype._setupReleaseData=function(){var t=this,e=t._releaseData;return e.isActive=!1,e.isPositioningStarted=!1,e.containerDiffX=0,e.containerDiffY=0,t},h.prototype._checkOverlap=function(){var t,e,i,n,o,r,a=this,s=a._getItem(),l=a._sortPredicate(s);return l?(t=a._dragData.currentEvent,e=s.getGrid(),i=e._items.indexOf(s),n=l.grid||e,o=l.index,r=l.action||"move",e===n?(("swap"===r?p:c)(e._items,i,o),e._emitter.emit(jt,t,{item:s,fromIndex:i,toIndex:o,action:r}),e.layout()):(s._gridId=n._id,a._isMigrating=s._gridId!==a._gridId,e._items.splice(i,1),D(n._items,s,o),s._sortData=null,e._emitter.emit(zt,t,{item:s,fromIndex:i,toGrid:n,toIndex:o}),n._emitter.emit(Vt,t,{item:s,fromGrid:e,fromIndex:i,toIndex:o}),e.layout(),n.layout()),a):a},h.prototype._finishMigration=function(t){var e,i,n,o,r=this,s=r._getItem(),l=s._element,d=r._getGrid(),f=d._settings,h=s.getGrid(),g=h._settings,_=g.dragEnabled&&g._dragGrid?g._dragGrid:h._element,p=0,c=0;return r._isMigrating=!1,r._dragData.isActive||(r._releaseData.isActive=!0),r.destroy(),s._animate.destroy(),s._animateChild.destroy(),R(l,f.itemClass),R(l,f.itemVisibleClass),R(l,f.itemHiddenClass),I(l,g.itemClass),I(l,g.itemVisibleClass),s._animate=new a.AnimateLayout(s,l),s._animateChild=new a.AnimateVisibility(s,s._child),s._isDefaultAnimate=s._animate instanceof u,s._isDefaultChildAnimate=s._animateChild instanceof u,n=A(l,"x"),o=A(l,"y"),_.appendChild(l),i=X(l,d._element),n+=i.left,o+=i.top,_!==h._element&&(i=X(l,h._element),p=i.left,c=i.top),S(l,{transform:"translateX("+n+"px) translateY("+o+"px)"}),s._child.removeAttribute("style"),h._itemShowHandler.start(s,!0),s._updateDimensions()._updateSortData(),s._drag=g.dragEnabled?new a.Drag(s):null,h._emitter.emit(Ft,t,s),s._drag?(e=s._drag._releaseData,e.containerDiffX=p,e.containerDiffY=c,s._drag._startRelease()):s._layout(),r},h.prototype._stopDrag=function(){var t,e,i,n=this,o=n._dragData;if(!o.isActive)return n;if(n._isMigrating)return void n._finishMigration(o.currentEvent);for(t=n._getItem()._element,e=n._getGrid(),i=0;i<o.scrollParents.length;i++)o.scrollParents[i].removeEventListener("scroll",n._scrollHandler);return n._checkSortOverlap("cancel"),t.parentNode!==e._element&&(e._element.appendChild(t),S(t,{transform:"translateX("+o.gridX+"px) translateY("+o.gridY+"px)"})),R(t,e._settings.itemDraggingClass),n._setupDragData(),n},h.prototype._startRelease=function(){var t,e,i,n=this,o=n._releaseData;return o.isActive?n:(t=n._getItem(),e=t._element,i=n._getGrid(),o.isActive=!0,I(e,i._settings.itemReleasingClass),i._emitter.emit(qt,t),t._layout(!1),n)},h.prototype._stopRelease=function(t){var e,i,n,o,r,a=this,s=a._releaseData;return s.isActive?(e=a._getItem(),i=e._element,n=a._getGrid(),R(i,n._settings.itemReleasingClass),i.parentNode!==n._element&&(o=t?A(i,"x")-s.containerDiffX:e._left,r=t?A(i,"y")-s.containerDiffY:e._top,n._element.appendChild(i),S(i,{transform:"translateX("+o+"px) translateY("+r+"px)"})),a._setupReleaseData(),t||n._emitter.emit(Tt,e),a):a},h.prototype._onDragStart=function(t){var e,i,n,o,r,a,s,l,d,f,u,h,g,_=this,p=_._getItem();if(p._isActive){for(e=p._element,i=_._getGrid(),n=i._settings,o=_._dragData,r=_._releaseData,p._isPositioning&&p._stopLayout(!0),p._migrate.isActive&&p._stopMigrate(!0),r.isActive&&(R(e,n.itemReleasingClass),_._setupReleaseData()),o.isActive=!0,o.startEvent=o.currentEvent=t,a=A(e,"x"),s=A(e,"y"),l=i._element,d=n.dragContainer,o.left=o.gridX=a,o.top=o.gridY=s,d&&d!==l&&(h=e.parentNode===d,h||d.appendChild(e),f=X(e,l),o.containerDiffX=f.left,o.containerDiffY=f.top,h?(o.gridX=a-o.containerDiffX,o.gridY=s-o.containerDiffY):(o.left=a+o.containerDiffX,o.top=s+o.containerDiffY,S(e,{transform:"translateX("+o.left+"px) translateY("+o.top+"px)"}))),u=e.getBoundingClientRect(),o.elementClientX=u.left,o.elementClientY=u.top,o.scrollParents=Y(e),d&&d!==l&&(o.scrollParents=m(o.scrollParents.concat(Y(l)))),g=0;g<o.scrollParents.length;g++)o.scrollParents[g].addEventListener("scroll",_._scrollHandler);return I(e,n.itemDraggingClass),i._emitter.emit(Ot,t,p),_}},h.prototype._onDragMove=function(t){var e,i,n,o,r,a,s=this,l=s._getItem();return l._isActive?(e=l._element,i=s._getGrid(),n=i._settings,o=s._dragData,r=t.deltaX-o.currentEvent.deltaX,a=t.deltaY-o.currentEvent.deltaY,o.currentEvent=t,o.left+=r,o.top+=a,o.gridX+=r,o.gridY+=a,o.elementClientX+=r,o.elementClientY+=a,S(e,{transform:"translateX("+o.left+"px) translateY("+o.top+"px)"}),n.dragSort&&s._checkSortOverlap(),i._emitter.emit(Mt,t,l),s):void s._stopDrag()},h.prototype._onDragScroll=function(t){var e,i=this,n=i._getItem(),o=n._element,r=i._getGrid(),a=r._settings,s=i._dragData,l=r._element,d=a.dragContainer,f=o.getBoundingClientRect(),u=s.elementClientX-f.left,h=s.elementClientY-f.top;return d&&d!==l&&(e=X(o,l),s.containerDiffX=e.left,s.containerDiffY=e.top),s.left+=u,s.top+=h,s.gridX=s.left-s.containerDiffX,s.gridY=s.top-s.containerDiffY,S(o,{transform:"translateX("+s.left+"px) translateY("+s.top+"px)"}),a.dragSort&&i._checkSortOverlap(),r._emitter.emit(Nt,t,n),i},h.prototype._onDragEnd=function(t){var e,i=this,n=i._getItem(),o=n._element,r=i._getGrid(),a=r._settings,s=i._dragData,l=i._releaseData;if(!n._isActive)return void i._stopDrag();for(a.dragSort&&i._checkSortOverlap("finish"),e=0;e<s.scrollParents.length;e++)s.scrollParents[e].removeEventListener("scroll",i._scrollHandler);return R(o,a.itemDraggingClass),l.containerDiffX=s.containerDiffX,l.containerDiffY=s.containerDiffY,i._setupDragData(),r._emitter.emit(Qt,t,n),i._isMigrating?i._finishMigration(t):i._startRelease(),i},g.prototype.isResolved=function(){return this._isResolved},g.prototype.isRejected=function(){return this._isRejected},g.prototype.resolve=function(){var t=this;t._isRejected||t._isResolved||(t._isResolved=!0,"function"==typeof t._onResolved&&t._onResolved(),t._onResolved=t._onRejected=null)},g.prototype.reject=function(){var t=this;t._isRejected||t._isResolved||(t._isRejected=!0,"function"==typeof t._onRejected&&t._onRejected(),t._onResolved=t._onRejected=null)},a});