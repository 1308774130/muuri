/*!
 * Muuri v0.3.0-dev
 * https://github.com/haltu/muuri
 * Copyright (c) 2015, Haltu Oy
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
!function(t,e){var i,n;if("function"==typeof define&&define.amd)define(function(r){return i=r.defined&&r.defined("velocity")?r("velocity"):void 0,n=r.defined&&r.defined("hammer")?r("hammer"):void 0,e(t,"Muuri",i,n)});else if("object"==typeof module&&module.exports){try{i=require("velocity-animate")}catch(t){}try{n=require("hammerjs")}catch(t){}module.exports=e(t,"Muuri",i,n)}else i="function"==typeof t.jQuery?t.jQuery.Velocity:t.Velocity,n=t.Hammer,t.Muuri=e(t,"Muuri",i,n)}(this,function(t,e,n,r,o){"use strict";function s(e,i){var n,r,o,a,l=this;if((e=l._element="string"==typeof e?$.querySelectorAll(e)[0]:e)!==$.body&&!$.body.contains(e))throw new nt("Container element must be an existing DOM element");n=l._settings=Z(s.defaultOptions,i),l._id=++dt,ot[l._id]=l,l._isDestroyed=!1,l._layout=null,l._emitter=new s.Emitter,l._setSortGroup(n.dragSortGroup),l._sortConnections=et.isArray(n.dragSortConnections)&&n.dragSortConnections.length?n.dragSortConnections:null,l._itemShowHandler="function"==typeof n.show?n.show():q("show",n.show),l._itemHideHandler="function"==typeof n.hide?n.hide():q("hide",n.hide),H(e,n.containerClass),l.refreshContainer(),l._items=[],r=n.items,"string"==typeof r?E(l._element.children).forEach(function(t){("*"===r||ft(t,r))&&l._items.push(new s.Item(l,t))}):(et.isArray(r)||y(r))&&(l._items=E(r).map(function(t){return new s.Item(l,t)})),a=n.layoutOnResize,a=a===!0?0:"number"==typeof a?a:-1,a>=0&&(o=w(function(){l.refreshContainer().refreshItems().layout()},a),l._resizeHandler=function(){o()},t.addEventListener("resize",l._resizeHandler)),n.layoutOnInit&&l.layout(!0)}function a(t,e){var i,n=this,r=t._settings;n._id=++dt,st[n._id]=n,n._isDestroyed=!1,e.parentNode!==t._element&&t._element.appendChild(e),H(e,r.itemClass),i="none"===C(e,"display"),H(e,i?r.itemHiddenClass:r.itemVisibleClass),n._gridId=t._id,n._element=e,n._child=e.children[0],n._animate=new s.AnimateLayout(n,e),n._animateChild=new s.AnimateVisibility(n,n._child),n._isDefaultAnimate=n._animate instanceof h,n._isDefaultChildAnimate=n._animateChild instanceof h,n._isActive=!i,n._isPositioning=!1,n._isHidden=i,n._isHiding=!1,n._isShowing=!1,n._visibilityQueue=[],n._layoutQueue=[],n._left=0,n._top=0,S(e,{left:"0",top:"0",transform:"translateX(0px) translateY(0px)",display:i?"none":"block"}),n._refreshDimensions()._refreshSortData(),i?t._itemHideHandler.start(n,!0):t._itemShowHandler.start(n,!0),n._drag=r.dragEnabled?new s.Drag(n):null,n._migrate={isActive:!1,appendTo:null,containerDiffX:0,containerDiffY:0,fromGrid:null,fromIndex:0,toIndex:0}}function l(t,e){e=e?e.concat():t.getItems("active");var i=this,n=t._settings.layout,r=t._padding,o=t._border,s=t._width-o.left-o.right-r.left-r.right,a=t._height-o.top-o.bottom-r.top-r.bottom,l="function"==typeof n?n(e,s,a):d(e,s,a,m(n)?n:{});i.items=e,i.slots=l.slots,i.setWidth=l.setWidth||!1,i.setHeight=l.setHeight||!1,i.width=l.width,i.height=l.height}function d(t,e,i,n){var r,o,s,a,l=!!n.fillGaps,f=!!n.horizontal,h=!!n.alignRight,u=!!n.alignBottom,_={slots:{},width:f?0:e,height:f?i:0,setWidth:f,setHeight:!f},g=[];if(!t.length)return _;for(a=0;a<t.length;a++)s=t[a],o=d.getSlot(_,g,s._outerWidth,s._outerHeight,!f,l),f?_.width=it.max(_.width,o.left+o.width):_.height=it.max(_.height,o.top+o.height),_.slots[s._id]=o;if(h||u)for(r=tt.keys(_.slots),a=0;a<r.length;a++)o=_.slots[r[a]],h&&(o.left=_.width-(o.left+o.width)),u&&(o.top=_.height-(o.top+o.height));return _}function f(){this._isDestroyed=!1}function h(t,i){this._element=i,this._queue=e+"-"+ ++dt,this._isAnimating=!1,this._isDestroyed=!1}function u(t){if(!r)throw nt("["+e+"] required dependency Hammer is not defined.");var i,n=this,o=t._element,s=t.getGrid(),a=s._settings,l="function"==typeof a.dragStartPredicate?a.dragStartPredicate:u.defaultStartPredicate,d=0;n._itemId=t._id,n._gridId=s._id,n._hammer=i=new r.Manager(o),n._isDestroyed=!1,n._isMigrating=!1,n._dragData={},n._releaseData={},n._setupDragData(),n._setupReleaseData(),n._checkSortOverlap=w(function(){n._dragData.isActive&&n._checkOverlap()},a.dragSortInterval),n._sortPredicate="function"==typeof a.dragSortPredicate?a.dragSortPredicate:u.defaultSortPredicate,n._scrollHandler=function(t){n._onDragScroll(t)},i.add(new r.Pan({event:"drag",pointers:1,threshold:0,direction:r.DIRECTION_ALL})),i.add(new r.Press({event:"draginit",pointers:1,threshold:1e3,time:0})),i.set({touchAction:"none"}),i.on("draginit dragstart dragmove",function(t){var e;0===d?(e=l(n._getItem(),t),e===!0?(d=1,n._onDragStart(t)):e===!1&&(d=2)):1===d&&n._dragData.isActive&&n._onDragMove(t)}).on("dragend dragcancel draginitup",function(t){var e=1===d;l(n._getItem(),t),d=0,e&&n._dragData.isActive&&n._onDragEnd(t)}),o.addEventListener("dragstart",J,!1)}function _(t,e){var i=t.length,n=i-1;return e>n?n:e<0?it.max(i+e,0):e}function g(t,e,i){if(!(t.length<2)){var n,r=_(t,e),o=_(t,i);r!==o&&(n=t[r],t[r]=t[o],t[o]=n)}}function p(t,e,i){if(!(t.length<2)){var n=_(t,e),r=_(t,i);n!==r&&t.splice(r,0,t.splice(n,1)[0])}}function c(t){var e,i=[],n=t.length;if(n)for(i[0]=t[0],e=1;e<n;e++)i.indexOf(t[e])<0&&(i[i.length]=t[e]);return i}function m(t){return"object"==typeof t&&"[object Object]"===tt.prototype.toString.call(t)}function y(t){var e=tt.prototype.toString.call(t);return"[object HTMLCollection]"===e||"[object NodeList]"===e}function v(t,e){return tt.keys(e).forEach(function(i){var n=m(e[i]);m(t[i])&&n?(t[i]=v({},t[i]),t[i]=v(t[i],e[i])):t[i]=n?v({},e[i]):et.isArray(e[i])?e[i].concat():e[i]}),t}function D(t,e,i){var n="number"==typeof i?i:-1;t.splice.apply(t,[n<0?t.length-n+1:n,0].concat(e))}function w(e,i){var n;return i>0?function(r){n!==o&&(n=t.clearTimeout(n),"finish"===r&&e()),"cancel"!==r&&"finish"!==r&&(n=t.setTimeout(function(){n=o,e()},i))}:function(t){"cancel"!==t&&e()}}function C(e,i){return t.getComputedStyle(e,null).getPropertyValue("transform"===i?ht.styleName||i:i)}function b(t,e){return parseFloat(C(t,e))||0}function x(t,e){return parseFloat((C(t,"transform")||"").replace("matrix(","").split(",")["x"===e?4:5])||0}function S(t,e){var i,n,r,o=tt.keys(e);for(r=0;r<o.length;r++)i=o[r],n=e[i],t.style["transform"===i&&ht?ht.propName:i]=n}function A(t,e){var i,r=tt.keys(e);for(i=0;i<r.length;i++)n.hook(t,r[i],e[r[i]])}function H(t,e){t.classList?t.classList.add(e):ft(t,"."+e)||(t.className+=" "+e)}function I(t,e){t.classList?t.classList.remove(e):ft(t,"."+e)&&(t.className=(" "+t.className+" ").replace(" "+e+" "," ").trim())}function E(t){return[].slice.call(t)}function X(t,e){var i,n,r=G(t)||$,o={left:0,top:0};return r===e?o:(i=R(r,"padding"),n=R(e,"padding"),{left:n.left-i.left,top:n.top-i.top})}function P(e){var i=[],n=/(auto|scroll)/,r=e.parentNode;if(ut){if("fixed"===C(e,"position"))return i;for(;r&&r!==$&&r!==$.documentElement;)n.test(C(r,"overflow")+C(r,"overflow-y")+C(r,"overflow-x"))&&(i[i.length]=r),r="fixed"===C(r,"position")?null:r.parentNode;null!==r&&(i[i.length]=t)}else{for(;r&&r!==$;)"fixed"!==C(e,"position")||Y(r)?(n.test(C(r,"overflow")+C(r,"overflow-y")+C(r,"overflow-x"))&&(i[i.length]=r),e=r,r=r.parentNode):r=r.parentNode;i[i.length-1]===$.documentElement?i[i.length-1]=t:i[i.length]=t}return i}function Y(t){var e=C(t,"transform"),i=C(t,"display");return"none"!==e&&"inline"!==i&&"none"!==i}function G(e){var i,n;if(e===$)return null;if(e===t)return $;if("relative"===(i=C(e,"position")))return e;if("fixed"!==i&&"absolute"!==i)return null;if("fixed"===i&&ut)return t;if(n=e===$.documentElement?$:e.parentElement||null,"fixed"===i){for(;n&&n!==$&&!Y(n);)n=n.parentElement||$;return n===$?t:n}for(;n&&n!==$&&"static"===C(n,"position")&&!Y(n);)n=n.parentElement||$;return n}function R(e,i){var n,r,o,s={left:0,top:0};return e===$?s:(s.left=t.pageXOffset||0,s.top=t.pageYOffset||0,e.self===t.self?s:(n=e.getBoundingClientRect(),s.left+=n.left,s.top+=n.top,i=i||"border","margin"===i?(r=b(e,"margin-left"),o=b(e,"margin-top"),s.left-=r>0?r:0,s.top-=o>0?o:0):"border"!==i&&(s.left+=b(e,"border-left-width"),s.top+=b(e,"border-top-width")),"content"===i&&(s.left+=b(e,"padding-left"),s.top+=b(e,"padding-top")),s))}function L(t,e){return!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top)}function k(t,e){return t.top-e.top||t.left-e.left}function M(t,e){return t.left-e.left||t.top-e.top}function O(t,e){return t.left>=e.left&&t.top>=e.top&&t.left+t.width<=e.left+e.width&&t.top+t.height<=e.top+e.height}function N(t,e){var i=[];return L(t,e)?(t.left<e.left&&(i[i.length]={left:t.left,top:t.top,width:e.left-t.left,height:t.height}),t.left+t.width>e.left+e.width&&(i[i.length]={left:e.left+e.width,top:t.top,width:t.left+t.width-(e.left+e.width),height:t.height}),t.top<e.top&&(i[i.length]={left:t.left,top:t.top,width:t.width,height:e.top-t.top}),t.top+t.height>e.top+e.height&&(i[i.length]={left:t.left,top:e.top+e.height,width:t.width,height:t.top+t.height-(e.top+e.height)}),i):[{left:t.left,top:t.top,width:t.width,height:t.height}]}function z(t){for(var e,i,n,r=t.length;r--;)for(i=t[r],e=t.length;e--;)if(n=t[e],r!==e&&O(i,n)){t.splice(r,1);break}return t}function V(t,e){return L(t,e)?(it.min(t.left+t.width,e.left+e.width)-it.max(t.left,e.left))*(it.min(t.top+t.height,e.top+e.height)-it.max(t.top,e.top))/(it.min(t.width,e.width)*it.min(t.height,e.height))*100:0}function F(t){var e,i={};for(e=0;e<t.length;e++)i[t[e]._id]=e;return i}function Q(t,e,i,n){var r=n[t._id],o=n[e._id];return i?o-r:r-o}function T(t,e,i,n){var r,o,s,a,l,d=0;for(l=0;l<n.length;l++)if(r=n[l][0],o=n[l][1],s=(t._sortData?t:t._refreshSortData())._sortData[r],a=(e._sortData?e:e._refreshSortData())._sortData[r],0!==(d="desc"===o||!o&&i?a<s?-1:a>s?1:0:s<a?-1:s>a?1:0))return d;return d}function j(t,e,i,n){var r,s,a=t.getItems(i),l=n||{},d=l.instant===!0,f=l.onFinish,h=l.layout?l.layout:l.layout===o,u=a.length,_="show"===e,g=_?_t:pt,p=_?gt:ct,c=!1,m=[],y=[],v=[];for(s=0;s<a.length;s++)r=a[s],(_?r._isHidden||r._isHiding||r._isShowing&&d:!r.isHidden||r._isShowing||r._isHiding&&d)&&(m[m.length]=r);if(u=m.length){for(t._emitter.emit(g,m.concat()),s=0;s<m.length;s++)r=m[s],(_&&!r._isActive||!_&&r._isActive)&&(c=!0),_&&!r._isActive&&(r._skipNextLayoutAnimation=!0,v[v.length]=r),r["_"+e](d,function(e,i){e||(y[y.length]=i),--u<1&&("function"==typeof f&&f(y.concat()),t._emitter.emit(p,y.concat()))});c&&(v.length&&t.refreshItems(v),h&&t.layout("instant"===h,"function"==typeof h?h:o))}else"function"==typeof f&&f(m);return t}function q(t,e){var i=parseInt(e&&e.duration)||0,n=i>0,r=e&&e.easing||"ease",o=e&&m(e.styles)?e.styles:null;return{start:function(t,e,s){var a;n&&o?e?(t._isDefaultChildAnimate?A(t._child,o):S(t._child,o),s&&s()):(a={duration:i,easing:r,onFinish:s},t._isDefaultChildAnimate?t._animateChild.start(null,o,a):t._animateChild.start(o,a)):s&&s()},stop:function(t){t._animateChild.stop()}}}function B(t,e,i){var n,r,o,s,a=null,l=e._getSortConnections(!0),d=-1;for(s=0;s<l.length;s++)r=l[s],r.refreshContainer("offset"),o=r._offset,(n=V(t,{width:r._width,height:r._height,left:o.left,top:o.top}))>i&&n>d&&(d=n,a=r);return a}function W(t,e,i){var n,r=t.splice(0,t.length);for(n=0;n<r.length;n++)r[n](e,i)}function U(t,e){var i;return"inactive"===e?!t.isActive():"hidden"===e?!t.isVisible():(i="is"+e.charAt(0).toUpperCase()+e.slice(1),"function"==typeof t[i]&&t[i]())}function J(t){t.preventDefault&&t.preventDefault()}function K(t){var e={};return tt.keys(t).forEach(function(i){var n=t[i];n!==o&&null!==n&&(e[i]=n)}),e}function Z(t,e){var i=v({},t);return i=e?v(i,e):i,i.show&&i.show.styles&&(i.show.styles=K(i.show.styles)),i.hide&&i.hide.styles&&(i.hide.styles=K(i.hide.styles)),i}var $=t.document,tt=t.Object,et=t.Array,it=t.Math,nt=t.Error,rt=t.Element,ot={},st={},at={},lt=function(){},dt=0,ft=function(){var t=rt.prototype,e=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;return function(t,i){return e.call(t,i)}}(),ht=function(t){var e,i,n,r=$.documentElement,s=t.charAt(0).toUpperCase()+t.slice(1),a=["","Webkit","Moz","O","ms"];for(n=0;n<a.length;n++)if(e=a[n],i=e?e+s:t,r.style[i]!==o)return e=e.toLowerCase(),{prefix:e,propName:i,styleName:e?"-"+e+"-"+t:t};return null}("transform"),ut=function(){if(!ht)return!0;var t,e,i=$.createElement("div"),n=$.createElement("div");return S(i,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0",transform:"none"}),S(n,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0",transform:"none"}),i.appendChild(n),$.body.appendChild(i),t=n.getBoundingClientRect().left,i.style[ht.propName]="scaleX(1)",e=n.getBoundingClientRect().left,$.body.removeChild(i),e===t}(),_t="showStart",gt="showEnd",pt="hideStart",ct="hideEnd";return s.Item=a,s.Drag=u,s.Layout=l,s.AnimateLayout=h,s.AnimateVisibility=h,s.Emitter=f,s.defaultOptions={items:"*",show:{duration:300,easing:"ease",styles:{opacity:1,scale:1}},hide:{duration:300,easing:"ease",styles:{opacity:0,scale:.5}},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1},layoutOnResize:100,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragStartPredicate:null,dragSort:!0,dragSortInterval:100,dragSortPredicate:{threshold:50,action:"move"},dragSortGroup:null,dragSortConnections:null,dragReleaseDuration:300,dragReleaseEasing:"ease",containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing"},s.prototype.on=function(t,e){return this._isDestroyed||this._emitter.on(t,e),this},s.prototype.off=function(t,e){return this._isDestroyed||this._emitter.off(t,e),this},s.prototype.getElement=function(){return this._element},s.prototype.getDimensions=function(){var t=this;return{width:t._width,height:t._height,padding:{left:t._padding.left,right:t._padding.right,top:t._padding.top,bottom:t._padding.bottom},border:{left:t._border.left,right:t._border.right,top:t._border.top,bottom:t._border.bottom}}},s.prototype.getItems=function(t,e){var i,n,r=this,o=t&&"string"!=typeof t,s=o?y(t)?E(t):[].concat(t):null,a=o?e:t,l=[];if(r._isDestroyed)return l;if((a="string"==typeof a?a:null)||s){for(s=s||r._items,n=0;n<s.length;n++)!(i=o?r._getItem(s[n]):s[n])||a&&!U(i,a)||(l[l.length]=i);return l}return l.concat(r._items)},s.prototype.refreshContainer=function(){var t,e,i=this,n=i._element,r=arguments.length,o=r>0,s=["left","right","top","bottom"],a={width:!o,height:!o,offset:!o,padding:!o,border:!o,"box-sizing":!o};if(i._isDestroyed)return i;if(o)for(e=0;e<r;e++)a[arguments[e]]=!0;if((a.width||a.height||a.offset)&&(t=n.getBoundingClientRect()),a.width&&(i._width=it.round(t.width)),a.height&&(i._height=it.round(t.height)),a.offset&&(i._offset=i._offset||{},i._offset.left=it.round(t.left),i._offset.top=it.round(t.top)),a.padding)for(i._padding=i._padding||{},e=0;e<s.length;e++)i._padding[s[e]]=it.round(b(n,"padding-"+s[e]));if(a.border)for(i._border=i._border||{},e=0;e<s.length;e++)i._border[s[e]]=it.round(b(n,"border-"+s[e]+"-width"));return a["box-sizing"]&&(i._boxSizing=C(n,"box-sizing")),i},s.prototype.refreshItems=function(t){var e,i,n=this;if(!n._isDestroyed)for(e=n.getItems(t||"active"),i=0;i<e.length;i++)e[i]._refreshDimensions();return n},s.prototype.refreshSortData=function(t){var e,i,n=this;if(!n._isDestroyed)for(e=n.getItems(t),i=0;i<e.length;i++)e[i]._refreshSortData();return n},s.prototype.synchronize=function(){var t,e,i,n=this,r=n._element,o=n._items;if(n._isDestroyed)return n;if(o.length){for(i=0;i<o.length;i++)e=o[i]._element,e.parentNode===r&&(t=t||$.createDocumentFragment(),t.appendChild(e));t&&r.appendChild(t)}return n._emitter.emit("synchronize"),n},s.prototype.layout=function(t,e){function i(t,e){t||(c[c.length]=e),++m===r&&("function"==typeof g&&g(c.concat()),_.emit("layoutEnd",c.concat()))}var n,r,o,a,l,d,f,h,u=this,_=u._emitter,g="function"==typeof t?t:e,p=t===!0,c=[],m=0;if(u._isDestroyed)return u;if(n=u._layout=new s.Layout(u),r=n.items.length,_.emit("layoutStart",n.items.concat()),(n.setWidth||n.setHeight)&&(o=u._padding,a=u._border,l="border-box"===u._boxSizing,n.setHeight&&S(u._element,{height:(l?n.height+o.top+o.bottom+a.top+a.bottom:n.height)+"px"}),n.setWidth&&S(u._element,{width:(l?n.width+o.left+o.right+a.left+a.right:n.width)+"px"}),u.refreshContainer("width","height")),r)for(h=0;h<n.items.length;h++)d=n.items[h],f=n.slots[d._id],d._left=f.left+u._padding.left,d._top=f.top+u._padding.top,d._drag&&d._drag._dragData.isActive?i(!1,d):d._layout(p,i);else i(!0);return u},s.prototype.add=function(t,e){var i,n,r,a=this,l=[].concat(t),d=e||{},f=d.layout?d.layout:d.layout===o,h=[],u=a._items,_=!1;if(a._isDestroyed)return[];for(r=0;r<u.length;r++)(i=l.indexOf(u[r]._element))>-1&&l.splice(i,1);if(!l.length)return h;for(r=0;r<l.length;r++)n=new s.Item(a,l[r]),h[h.length]=n,n._isActive&&(_=!0,n._skipNextLayoutAnimation=!0);return D(u,h,d.index),a._emitter.emit("add",h.concat()),_&&f&&a.layout("instant"===f,"function"==typeof f?f:o),h},s.prototype.remove=function(t,e){var i,n,r,s=this,a=e||{},l=a.layout?a.layout:a.layout===o,d=!1;if(s._isDestroyed)return[];for(i=s.getItems(t),r=0;r<i.length;r++)n=i[r],n._isActive&&(d=!0),n._destroy(a.removeElements);return s._emitter.emit("remove",i.concat()),d&&l&&s.layout("instant"===l,"function"==typeof l?l:o),i},s.prototype.show=function(t,e){return this._isDestroyed?this:j(this,"show",t,e)},s.prototype.hide=function(t,e){return this._isDestroyed?this:j(this,"hide",t,e)},s.prototype.filter=function(t,e){var i,n,r,s=this,a=s._items,l=typeof t,d="string"===l,f="function"===l,h=e||{},u=h.instant===!0,_=h.layout?h.layout:h.layout===o,g="function"==typeof h.onFinish?h.onFinish:null,p=[],c=[],m=-1;if(s._isDestroyed||!a.length)return s;if(i=g?function(){++m&&g(p.concat(),c.concat())}:lt,f||d)for(r=0;r<a.length;r++)n=a[r],(f?t(n,n._element):ft(n._element,t))?p.push(n):c.push(n);return p.length?s.show(p,{instant:u,onFinish:i,layout:!1}):i(),c.length?s.hide(c,{instant:u,onFinish:i,layout:!1}):i(),(p.length||c.length)&&(s._emitter.emit("filter",p.concat(),c.concat()),_&&s.layout("instant"===_,"function"==typeof _?_:o)),s},s.prototype.sort=function(t,e){var i,n,r=this,s=r._items,a=e||{},l=!!a.descending,d=a.layout?a.layout:a.layout===o;if(r._isDestroyed||s.length<2)return r;if(i=s.concat(),"function"==typeof t)s.sort(function(e,r){return t(e,r)||Q(e,r,l,n||(n=F(i)))});else if("string"==typeof t)t=t.trim().split(" ").map(function(t){return t.split(":")}),s.sort(function(e,r){return T(e,r,l,t)||Q(e,r,l,n||(n=F(i)))});else{if(!et.isArray(t))return r;s.splice(0,s.length).concat(t)}return r._emitter.emit("sort",s.concat(),i),d&&r.layout("instant"===d,"function"==typeof d?d:o),r},s.prototype.move=function(t,e,i){var n,r,s,a,l,d=this,f=d._items,h=i||{},u=h.layout?h.layout:h.layout===o;return d._isDestroyed||f.length<2?d:(n=d._getItem(t),r=d._getItem(e),l="swap"===action,action=l?"swap":"move",n&&r&&n!==r&&(s=f.indexOf(n),a=f.indexOf(r),(l?g:p)(f,s,a),d._emitter.emit("move",{item:n,fromIndex:s,toIndex:a,action:action}),u&&d.layout("instant"===u,"function"==typeof u?u:o)),d)},s.prototype.send=function(t,e,i,n){var r,a,l,d,f,u,_,g,p,c,m,y,v,w,C,b=this,A=e;return inst._isDestroyed?b:(l=b._getItem(t))&&A instanceof s&&b!==A?null===(y="number"==typeof i?i:A._items.indexOf(A._getItem(i)))?b:(m=b._items.indexOf(l),r=b._settings,a=A._settings,d=n||{},f=d.appendTo||$.body,u=d.layout?d.layout:d.layout===o,_=l._migrate,g=l._element,p=l.isActive(),c=(l.isVisible()||l.isShowing())&&!l.isHiding(),l._stopLayout(!0),l._stopMigrate(!0),b._itemShowHandler.stop(l),b._itemHideHandler.stop(l),l._drag&&l._drag.destroy(),l._animate.destroy(),l._animateChild.destroy(),W(l._visibilityQueue,!0,l),I(g,r.itemClass),I(g,r.itemVisibleClass),I(g,r.itemHiddenClass),H(g,a.itemClass),H(g,c?a.itemVisibleClass:a.itemHiddenClass),b._items.splice(m,1),D(A._items,l,y),l._gridId=A._id,l._animate=new s.AnimateLayout(l,g),l._animateChild=new s.AnimateVisibility(l,l._child),l._isDefaultAnimate=l._animate instanceof h,l._isDefaultChildAnimate=l._animateChild instanceof h,b._element!==f&&(w=x(g,"x"),C=x(g,"y"),f.appendChild(g),v=X(g,b._element),w+=v.left,C+=v.top,v=X(g,A._element),_.containerDiffX=v.left,_.containerDiffY=v.top,S(g,{transform:"translateX("+w+"px) translateY("+C+"px)"})),S(g,{display:c?"block":"hidden"}),l._child.removeAttribute("style"),c?A._itemShowHandler.start(l,!0):A._itemHideHandler.start(l,!0),l._refreshDimensions()._refreshSortData(),l._drag=a.dragEnabled?new s.Drag(l):null,_.isActive=!0,_.appendTo=f,_.fromGrid=b,_.fromIndex=m,_.toIndex=y,b._emitter.emit("send",{item:l,fromIndex:m,toGrid:A,toIndex:y}),A._emitter.emit("receiveStart",{item:l,fromGrid:b,fromIndex:m,toIndex:y}),p&&u&&("instant"===u?(b.layout(!0),A.layout(!0)):"function"==typeof u?(b.layout(function(t){u(t,b)}),A.layout(function(t){u(t,A)})):(b.layout(),A.layout())),b):b},s.prototype.destroy=function(e){var i,n=this,r=n._element,s=n._items.concat();if(n._isDestroyed)return n;for(n._resizeHandler&&t.removeEventListener("resize",n._resizeHandler),i=0;i<s.length;i++)s[i]._destroy(e);return n._unsetSortGroup(),I(r,n._settings.containerClass),S(r,{height:""}),n._emitter.emit("destroy").destroy(),ot[n._id]=o,n._isDestroyed=!0,n},s.prototype._getItem=function(t){var e,i,n,r,o=this;if(o._isDestroyed||!t)return o._items[0]||null;if(t instanceof a)return t._gridId===o._id?t:null;if("number"==typeof t)return e=t>-1?t:o._items.length+t,o._items[e]||null;for(i=null,r=0;r<o._items.length;r++)if(n=o._items[r],n._element===t){i=n;break}return i},s.prototype._setSortGroup=function(t){var e=this;return e._sortGroup=null,t&&"string"==typeof t&&(e._sortGroup=t,at[t]||(at[t]=[]),at[t].push(e._id)),e},s.prototype._unsetSortGroup=function(){var t,e,i=this,n=i._sortGroup;if(n){for(t=at[n],e=0;e<t.length;e++)if(t[e]===i._id){t.splice(e,1);break}i._sortGroup=null}return i},s.prototype._getSortConnections=function(t){var e,i,n,r,o=this,s=t?[o]:[],a=o._sortConnections;if(o._isDestroyed)return s;if(a&&a.length)for(r=0;r<a.length;r++)if((e=at[a[r]])&&e.length)for(n=0;n<e.length;n++)(i=e[n])!==o._id&&s.push(ot[i]);return s},a.prototype.getGrid=function(){return ot[this._gridId]},a.prototype.getElement=function(){return this._element},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.getMargin=function(){return{left:this._margin.left,right:this._margin.right,top:this._margin.top,bottom:this._margin.bottom}},a.prototype.getPosition=function(){return{left:this._left,top:this._top}},a.prototype.isActive=function(){return this._isActive},a.prototype.isVisible=function(){return!this._isHidden},a.prototype.isShowing=function(){return this._isShowing},a.prototype.isHiding=function(){return this._isHiding},a.prototype.isPositioning=function(){return this._isPositioning},a.prototype.isDragging=function(){return this._drag&&this._drag._dragData.isActive},a.prototype.isReleasing=function(){return this._drag&&this._drag._releaseData.isActive},a.prototype.isMigrating=function(){return this._migrate.isActive},a.prototype._stopLayout=function(t){var e=this;return e._isDestroyed||!e._isPositioning?e:(e._animate.stop(),I(e._element,e.getGrid()._settings.itemPositioningClass),e._isPositioning=!1,t&&W(e._layoutQueue,!0,e),e)},a.prototype._refreshDimensions=function(){var t,e,i,n,r,o,s=this;if(s._isDestroyed||s._isHidden)return s;for(t=s._element,i=["left","right","top","bottom"],r=s._margin=s._margin||{},o=0;o<4;o++)n=it.round(b(t,"margin-"+i[o])),r[i[o]]=n>0?n:0;return e=t.getBoundingClientRect(),s._width=it.round(e.width),s._height=it.round(e.height),s._outerWidth=s._width+r.left+r.right,s._outerHeight=s._height+r.top+r.bottom,s},a.prototype._refreshSortData=function(){var t,e,i=this;return i._isDestroyed||(t={},e=i.getGrid()._settings.sortData,e&&tt.keys(e).forEach(function(n){t[n]=e[n](i,i._element)}),i._sortData=t),i},a.prototype._layout=function(t,e){var i,r,o,s,a,l,d,f,h,u,_=this,g=_._element,p=_._isPositioning,c=_._migrate,m=_._drag?_._drag._releaseData:{},y=m.isActive&&m.isPositioningStarted===!1;if(_._isDestroyed)return _;if(i=_.getGrid(),r=i._settings,o=y?r.dragReleaseDuration:r.layoutDuration,s=y?r.dragReleaseEasing:r.layoutEasing,a=!t&&!_._skipNextLayoutAnimation&&o>0,u=function(){_._isPositioning&&(_._isPositioning=!1,I(g,r.itemPositioningClass)),m.isActive&&_._drag._stopRelease(),c.isActive&&_._stopMigrate(),W(_._layoutQueue,!1,_)},p&&W(_._layoutQueue,!0,_),y&&(m.isPositioningStarted=!0),"function"==typeof e&&(_._layoutQueue[_._layoutQueue.length]=e),l=m.isActive?m.containerDiffX:c.isActive?c.containerDiffX:0,d=m.isActive?m.containerDiffY:c.isActive?c.containerDiffY:0,a){if(p&&_._isDefaultAnimate?(f=parseFloat(n.hook(g,"translateX"))-l,h=parseFloat(n.hook(g,"translateY"))-d):(f=x(g,"x")-l,h=x(g,"y")-d),_._left===f&&_._top===h)return _._stopLayout(),void u();p||(_._isPositioning=!0,H(g,r.itemPositioningClass)),_._animate.start({translateX:f+l+"px",translateY:h+d+"px"},{translateX:_._left+l,translateY:_._top+d},{duration:o,easing:s,onFinish:u})}else _._stopLayout(),_._skipNextLayoutAnimation=!1,m.isActive&&g.parentNode!==i._element&&c.isActive&&c.appendTo!==i._element||S(g,{transform:"translateX("+(_._left+l)+"px) translateY("+(_._top+d)+"px)"}),u();return _},a.prototype._show=function(t,e){var i,n,r=this,o=r._element,s=r._visibilityQueue,a="function"==typeof e?e:null;return r._isDestroyed?r:(i=r.getGrid(),n=i._settings,r._isShowing?t?(i._itemShowHandler.stop(),W(s,!0,r),a&&(s[s.length]=a),i._itemShowHandler.start(r,t,function(){r._isShowing=!1,W(s,!1,r)})):a&&(s[s.length]=a):r._isHidden?(r._isHiding&&i._itemHideHandler.stop(r),r._isActive=r._isShowing=!0,r._isHidden=r._isHiding=!1,H(o,n.itemVisibleClass),I(o,n.itemHiddenClass),S(o,{display:"block"}),W(s,!0,r),a&&(s[s.length]=a),i._itemShowHandler.start(r,t,function(){r._isShowing=!1,W(s,!1,r)})):a&&a(!1,r),r)},a.prototype._hide=function(t,e){var i,n,r=this,o=r._element,s=r._visibilityQueue,a="function"==typeof e?e:null;return r._isDestroyed?r:(i=r.getGrid(),n=i._settings,r._isHiding?t?(i._itemHideHandler.stop(),W(s,!0,r),a&&(s[s.length]=a),i._itemHideHandler.start(r,t,function(){r._isHiding=!1,S(o,{display:"none"}),W(s,!1,r)})):a&&(s[s.length]=a):r._isHidden?a&&a(!1,r):(r._isShowing&&i._itemShowHandler.stop(r),r._isHidden=r._isHiding=!0,r._isActive=r._isShowing=!1,H(o,n.itemHiddenClass),I(o,n.itemVisibleClass),W(s,!0,r),"function"==typeof a&&(s[s.length]=a),i._itemHideHandler.start(r,t,function(){r._isHiding=!1,S(o,{display:"none"}),W(s,!1,r)})),r)},a.prototype._stopMigrate=function(t){var e,i,n,r,o,s,a=this,l=a._migrate,d=a._element;return a._isDestroyed||!l.isActive?a:(e=a.getGrid(),l.appendTo!==e._element&&(i=t?x(d,"x")-l.containerDiffX:a._left,n=t?x(d,"y")-l.containerDiffY:a._top,e._element.appendChild(d),S(d,{transform:"translateX("+i+"px) translateY("+n+"px)"})),t||(r=l.fromGrid,o=l.fromIndex,s=l.toIndex),l.isActive=!1,l.appendTo=null,l.containerDiffX=0,l.containerDiffY=0,l.fromGrid=null,l.fromIndex=0,l.toIndex=0,t||e._emitter.emit("receiveEnd",{item:a,fromGrid:r,fromIndex:o,toIndex:s}),a)},a.prototype._destroy=function(t){var e,i,n,r=this,s=r._element;return r._isDestroyed?r:(e=r.getGrid(),i=e._settings,n=e._items.indexOf(r),r._stopLayout(!0),e._itemShowHandler.stop(r),e._itemHideHandler.stop(r),r._stopMigrate(!0),r._drag&&r._drag.destroy(),r._animate.destroy(),r._animateChild.destroy(),s.removeAttribute("style"),r._child.removeAttribute("style"),W(r._visibilityQueue,!0,r),I(s,i.itemPositioningClass),I(s,i.itemDraggingClass),I(s,i.itemReleasingClass),I(s,i.itemClass),I(s,i.itemVisibleClass),I(s,i.itemHiddenClass),n>-1&&e._items.splice(n,1),t&&s.parentNode.removeChild(s),st[r._id]=o,r._isActive=r._isPositioning=r._isHiding=r._isShowing=!1,r._isDestroyed=r._isHidden=!0,r)},d.getSlot=function(t,e,i,n,r,o){var s,a,l,d,f,h=e[0]||[],u=[],_={left:null,top:null,width:i,height:n};for(d=0;d<h.length;d++)if(s=h[d],_.width<=s.width&&_.height<=s.height){_.left=s.left,_.top=s.top;break}for(null===_.left&&(_.left=r?0:t.width,_.top=r?t.height:0,o||(l=!0)),r&&_.top+_.height>t.height&&(_.left>0&&(u[u.length]={left:0,top:t.height,width:_.left,height:1/0}),_.left+_.width<t.width&&(u[u.length]={left:_.left+_.width,top:t.height,width:t.width-_.left-_.width,height:1/0}),t.height=_.top+_.height),!r&&_.left+_.width>t.width&&(_.top>0&&(u[u.length]={left:t.width,top:0,width:1/0,height:_.top}),_.top+_.height<t.height&&(u[u.length]={left:t.width,top:_.top+_.height,width:1/0,height:t.height-_.top-_.height}),t.width=_.left+_.width),d=o?0:l?h.length:d;d<h.length;d++)for(a=N(h[d],_),f=0;f<a.length;f++)s=a[f],s.width>0&&s.height>0&&(r&&s.top<t.height||!r&&s.left<t.width)&&(u[u.length]=s);return e[0]=z(u).sort(r?k:M),_},f.prototype.on=function(t,e){if(this._isDestroyed)return this;var i=this._events=this._events||{},n=i[t]||[];return n[n.length]=e,i[t]=n,this},f.prototype.off=function(t,e){if(this._isDestroyed)return this;var n=this._events=this._events||{},r=n[t]||[],o=r.length;if(o)for(;o--;)e===r[i]&&r.splice(o,1);return this},f.prototype.emit=function(t,e,i,n){if(this._isDestroyed)return this;var r,o,s=this._events=this._events||{},a=s[t]||[],l=a.length;if(l)for(r=arguments.length-1,a=a.concat(),o=0;o<l;o++)0===r?a[o]():1===r?a[o](e):2===r?a[o](e,i):a[o](e,i,n);return this},f.prototype.destroy=function(){if(this._isDestroyed)return this;var t,e=this._events||{},i=tt.keys(e);for(t=0;t<i.length;t++)e[i[t]].length=0,e[i[t]]=null;return this._isDestroyed=!0,this},h.prototype.start=function(t,e,i){if(!this._isDestroyed){var r=this,o=r._element,s=i||{},a="function"==typeof s.onFinish?s.onFinish:null,l={duration:s.duration||300,delay:s.delay||0,easing:s.easing||"ease",queue:r._queue};r._isAnimating&&r.stop(),t&&A(o,t),r._isAnimating=!0,a&&(l.complete=function(){a()}),n(o,e,l),n.Utilities.dequeue(o,r._queue)}},h.prototype.stop=function(){!this._isDestroyed&&this._isAnimating&&(this._isAnimating=!1,n(this._element,"stop",this._queue))},h.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=null,this._isDestroyed=!0)},u.defaultStartPredicate=function(e,i){if(!i.isFinal)return!0;var n=e.getElement(),r="a"===n.tagName.toLowerCase(),o=n.getAttribute("href"),s=n.getAttribute("target");r&&o&&it.abs(i.deltaX)<2&&it.abs(i.deltaY)<2&&i.deltaTime<200&&(s&&"_self"!==s?window.open(o,s):t.location.href=o)},u.defaultSortPredicate=function(t){var e,i,n,r,o,s,a,l,d,f=t._drag,h=f._dragData,u=f._getGrid(),_=u._settings.dragSortPredicate||{},g=_.threshold||50,p=_.action||"move",c={width:t._width,height:t._height,left:it.round(h.elementClientX),top:it.round(h.elementClientY)},m=B(c,u,g),y=0,v=0,D=-1;if(!m)return!1;for(i=m._items,n=m._offset,r=m._border,o=m._padding,m===u?(c.left=it.round(h.gridX)+t._margin.left,c.top=it.round(h.gridY)+t._margin.top):(y=n.left+r.left+o.left,v=n.top+r.top+o.top),d=0;d<i.length;d++)a=i[d],a._isActive&&a!==t&&(s=!0,(l=V(c,{width:a._width,height:a._height,left:it.round(a._left)+a._margin.left+y,top:it.round(a._top)+a._margin.top+v}))>D&&(e=d,D=l));return D<g&&t.getGrid()!==m&&(e=s?-1:0,D=1/0),D>=g&&{grid:m,index:e,action:p}},u.prototype.destroy=function(){var t=this;return t._isDestroyed||(t._dragData.isActive?t._stopDrag():t._releaseData.isActive&&t._stopRelease(!0),t._hammer.destroy(),t._getItem()._element.removeEventListener("dragstart",J,!1),t._isDestroyed=!0),t},u.prototype._getItem=function(){return st[this._itemId]||null},u.prototype._getGrid=function(){return ot[this._gridId]||null},u.prototype._setupDragData=function(){var t=this,e=t._dragData;return e.isActive=!1,e.startEvent=null,e.currentEvent=null,e.scrollParents=[],e.left=0,e.top=0,e.gridX=0,e.gridY=0,e.elementClientX=0,e.elementClientY=0,e.containerDiffX=0,e.containerDiffY=0,t},u.prototype._setupReleaseData=function(){var t=this,e=t._releaseData;return e.isActive=!1,e.isPositioningStarted=!1,e.containerDiffX=0,e.containerDiffY=0,t},
u.prototype._checkOverlap=function(){var t,e,i,n,r,o=this,s=o._getItem(),a=o._dragData.currentEvent,l=o._sortPredicate(s,a);return l?(t=s.getGrid(),e=t._items.indexOf(s),i=l.grid||t,n=l.index,r=l.action||"move",t===i?(("swap"===r?g:p)(t._items,e,n),t._emitter.emit("dragSort",a,{item:s,fromIndex:e,toIndex:n,action:r}),t.layout()):(s._gridId=i._id,o._isMigrating=s._gridId!==o._gridId,t._items.splice(e,1),D(i._items,s,n),s._sortData=null,t._emitter.emit("dragSend",a,{item:s,fromIndex:e,toGrid:i,toIndex:n}),i._emitter.emit("dragReceive",a,{item:s,fromGrid:t,fromIndex:e,toIndex:n}),t.layout(),i.layout()),o):o},u.prototype._finishMigration=function(t){var e,i,n,r,o=this,a=o._getItem(),l=a._element,d=o._getGrid(),f=d._settings,u=a.getGrid(),_=u._settings,g=_.dragEnabled&&_._dragGrid?_._dragGrid:u._element,p=0,c=0;return o._isMigrating=!1,o._dragData.isActive||(o._releaseData.isActive=!0),o.destroy(),a._animate.destroy(),a._animateChild.destroy(),I(l,f.itemClass),I(l,f.itemVisibleClass),I(l,f.itemHiddenClass),H(l,_.itemClass),H(l,_.itemVisibleClass),a._animate=new s.AnimateLayout(a,l),a._animateChild=new s.AnimateVisibility(a,a._child),a._isDefaultAnimate=a._animate instanceof h,a._isDefaultChildAnimate=a._animateChild instanceof h,n=x(l,"x"),r=x(l,"y"),g.appendChild(l),i=X(l,d._element),n+=i.left,r+=i.top,g!==u._element&&(i=X(l,u._element),p=i.left,c=i.top),S(l,{transform:"translateX("+n+"px) translateY("+r+"px)"}),a._child.removeAttribute("style"),u._itemShowHandler.start(a,!0),a._refreshDimensions()._refreshSortData(),a._drag=_.dragEnabled?new s.Drag(a):null,u._emitter.emit("dragReceiveDrop",t,a),a._drag?(e=a._drag._releaseData,e.containerDiffX=p,e.containerDiffY=c,a._drag._startRelease()):a._layout(),o},u.prototype._stopDrag=function(){var t,e,i,n=this,r=n._dragData;if(!r.isActive)return n;if(n._isMigrating)return void n._finishMigration(r.currentEvent);for(t=n._getItem()._element,e=n._getGrid(),i=0;i<r.scrollParents.length;i++)r.scrollParents[i].removeEventListener("scroll",n._scrollHandler);return n._checkSortOverlap("cancel"),t.parentNode!==e._element&&(e._element.appendChild(t),S(t,{transform:"translateX("+r.gridX+"px) translateY("+r.gridY+"px)"})),I(t,e._settings.itemDraggingClass),n._setupDragData(),n},u.prototype._startRelease=function(){var t,e,i,n=this,r=n._releaseData;return r.isActive?n:(t=n._getItem(),e=t._element,i=n._getGrid(),r.isActive=!0,H(e,i._settings.itemReleasingClass),i._emitter.emit("dragReleaseStart",t),t._layout(!1),n)},u.prototype._stopRelease=function(t){var e,i,n,r,o,s=this,a=s._releaseData;return a.isActive?(e=s._getItem(),i=e._element,n=s._getGrid(),I(i,n._settings.itemReleasingClass),i.parentNode!==n._element&&(r=t?x(i,"x")-a.containerDiffX:e._left,o=t?x(i,"y")-a.containerDiffY:e._top,n._element.appendChild(i),S(i,{transform:"translateX("+r+"px) translateY("+o+"px)"})),s._setupReleaseData(),t||n._emitter.emit("dragReleaseEnd",e),s):s},u.prototype._onDragStart=function(t){var e,i,n,r,o,s,a,l,d,f,h,u,_,g=this,p=g._getItem();if(p._isActive){for(e=p._element,i=g._getGrid(),n=i._settings,r=g._dragData,o=g._releaseData,p._isPositioning&&p._stopLayout(!0),p._migrate.isActive&&p._stopMigrate(!0),o.isActive&&(I(e,n.itemReleasingClass),g._setupReleaseData()),r.isActive=!0,r.startEvent=r.currentEvent=t,s=x(e,"x"),a=x(e,"y"),l=i._element,d=n.dragContainer,r.left=r.gridX=s,r.top=r.gridY=a,d&&d!==l&&(u=e.parentNode===d,u||d.appendChild(e),f=X(e,l),r.containerDiffX=f.left,r.containerDiffY=f.top,u?(r.gridX=s-r.containerDiffX,r.gridY=a-r.containerDiffY):(r.left=s+r.containerDiffX,r.top=a+r.containerDiffY,S(e,{transform:"translateX("+r.left+"px) translateY("+r.top+"px)"}))),h=e.getBoundingClientRect(),r.elementClientX=h.left,r.elementClientY=h.top,r.scrollParents=P(e),d&&d!==l&&(r.scrollParents=c(r.scrollParents.concat(P(l)))),_=0;_<r.scrollParents.length;_++)r.scrollParents[_].addEventListener("scroll",g._scrollHandler);return H(e,n.itemDraggingClass),i._emitter.emit("dragStart",t,p),g}},u.prototype._onDragMove=function(t){var e,i,n,r,o,s,a=this,l=a._getItem();return l._isActive?(e=l._element,i=a._getGrid(),n=i._settings,r=a._dragData,o=t.deltaX-r.currentEvent.deltaX,s=t.deltaY-r.currentEvent.deltaY,r.currentEvent=t,r.left+=o,r.top+=s,r.gridX+=o,r.gridY+=s,r.elementClientX+=o,r.elementClientY+=s,S(e,{transform:"translateX("+r.left+"px) translateY("+r.top+"px)"}),n.dragSort&&a._checkSortOverlap(),i._emitter.emit("dragMove",t,l),a):void a._stopDrag()},u.prototype._onDragScroll=function(t){var e,i=this,n=i._getItem(),r=n._element,o=i._getGrid(),s=o._settings,a=i._dragData,l=o._element,d=s.dragContainer,f=r.getBoundingClientRect(),h=a.elementClientX-f.left,u=a.elementClientY-f.top;return d&&d!==l&&(e=X(r,l),a.containerDiffX=e.left,a.containerDiffY=e.top),a.left+=h,a.top+=u,a.gridX=a.left-a.containerDiffX,a.gridY=a.top-a.containerDiffY,S(r,{transform:"translateX("+a.left+"px) translateY("+a.top+"px)"}),s.dragSort&&i._checkSortOverlap(),o._emitter.emit("dragScroll",t,n),i},u.prototype._onDragEnd=function(t){var e,i=this,n=i._getItem(),r=n._element,o=i._getGrid(),s=o._settings,a=i._dragData,l=i._releaseData;if(!n._isActive)return void i._stopDrag();for(s.dragSort&&i._checkSortOverlap("finish"),e=0;e<a.scrollParents.length;e++)a.scrollParents[e].removeEventListener("scroll",i._scrollHandler);return I(r,s.itemDraggingClass),l.containerDiffX=a.containerDiffX,l.containerDiffY=a.containerDiffY,i._setupDragData(),o._emitter.emit("dragEnd",t,n),i._isMigrating?i._finishMigration(t):i._startRelease(),i},s});